<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 450" width="600" height="450">
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1F2937">Decorator Pattern</text>
  <text x="300" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748B">Attach additional responsibilities dynamically</text>
  
  <!-- Component Interface -->
  <rect x="200" y="60" width="200" height="55" rx="0" fill="white" stroke="#3B82F6" stroke-width="2"/>
  <rect x="200" y="60" width="200" height="25" rx="0" fill="#DBEAFE"/>
  <text x="300" y="77" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1E40AF" font-weight="bold">«interface» Component</text>
  <line x1="200" y1="85" x2="400" y2="85" stroke="#3B82F6" stroke-width="1"/>
  <text x="210" y="105" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ operation(): void</text>
  
  <!-- Inheritance line -->
  <line x1="300" y1="115" x2="300" y2="140" stroke="#64748B" stroke-width="1.5"/>
  <line x1="150" y1="140" x2="450" y2="140" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="300,115 295,125 305,125" fill="white" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- Vertical lines -->
  <line x1="150" y1="140" x2="150" y2="165" stroke="#64748B" stroke-width="1.5"/>
  <line x1="450" y1="140" x2="450" y2="165" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- ConcreteComponent -->
  <rect x="50" y="170" width="200" height="55" rx="0" fill="white" stroke="#10B981" stroke-width="2"/>
  <rect x="50" y="170" width="200" height="25" rx="0" fill="#D1FAE5"/>
  <text x="150" y="187" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065F46" font-weight="bold">ConcreteComponent</text>
  <line x1="50" y1="195" x2="250" y2="195" stroke="#10B981" stroke-width="1"/>
  <text x="60" y="215" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ operation()</text>
  
  <!-- Decorator (abstract) -->
  <rect x="350" y="170" width="200" height="70" rx="0" fill="white" stroke="#8B5CF6" stroke-width="2"/>
  <rect x="350" y="170" width="200" height="25" rx="0" fill="#F5F3FF"/>
  <text x="450" y="187" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#5B21B6" font-weight="bold" font-style="italic">Decorator «abstract»</text>
  <line x1="350" y1="195" x2="550" y2="195" stroke="#8B5CF6" stroke-width="1"/>
  <text x="360" y="213" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">- component: Component</text>
  <text x="360" y="228" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ operation()</text>
  
  <!-- Association from Decorator to Component -->
  <path d="M450 170 L450 130 L340 130" stroke="#64748B" stroke-width="1.5" fill="none" stroke-dasharray="4,2"/>
  <polygon points="340,130 347,126 347,134" fill="#64748B"/>
  <text x="400" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#64748B">wraps</text>
  
  <!-- Inheritance from Decorator -->
  <line x1="450" y1="240" x2="450" y2="265" stroke="#64748B" stroke-width="1.5"/>
  <line x1="350" y1="265" x2="550" y2="265" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="450,240 445,250 455,250" fill="white" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- Vertical lines to concrete decorators -->
  <line x1="350" y1="265" x2="350" y2="290" stroke="#64748B" stroke-width="1.5"/>
  <line x1="550" y1="265" x2="550" y2="290" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- DecoratorA -->
  <rect x="275" y="295" width="150" height="70" rx="0" fill="white" stroke="#F59E0B" stroke-width="2"/>
  <rect x="275" y="295" width="150" height="25" rx="0" fill="#FEF3C7"/>
  <text x="350" y="312" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400E" font-weight="bold">DecoratorA</text>
  <line x1="275" y1="320" x2="425" y2="320" stroke="#F59E0B" stroke-width="1"/>
  <text x="285" y="338" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ operation()</text>
  <text x="285" y="353" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ addedBehavior()</text>
  
  <!-- DecoratorB -->
  <rect x="475" y="295" width="150" height="70" rx="0" fill="white" stroke="#EF4444" stroke-width="2"/>
  <rect x="475" y="295" width="150" height="25" rx="0" fill="#FEE2E2"/>
  <text x="550" y="312" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#991B1B" font-weight="bold">DecoratorB</text>
  <line x1="475" y1="320" x2="625" y2="320" stroke="#EF4444" stroke-width="1"/>
  <text x="485" y="338" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ operation()</text>
  <text x="485" y="353" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151">+ addedBehavior()</text>
  
  <!-- Note -->
  <text x="300" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Decorators can be stacked: new DecoratorB(new DecoratorA(new ConcreteComponent()))</text>
  
  <!-- Caption -->
  <text x="300" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Figure 4.19: Decorator Pattern Structure</text>
</svg>
