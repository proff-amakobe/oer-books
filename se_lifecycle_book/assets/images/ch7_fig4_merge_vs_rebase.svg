<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 450" width="700" height="450">
  <!-- Title -->
  <text x="350" y="28" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1F2937">Merge vs Rebase</text>
  <text x="350" y="48" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748B">Two strategies for integrating branch changes</text>
  
  <!-- MERGE Section -->
  <rect x="25" y="65" width="310" height="175" rx="8" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="2"/>
  <text x="180" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#10B981">Merge (Three-Way)</text>
  
  <!-- Main branch for merge -->
  <line x1="50" y1="130" x2="280" y2="130" stroke="#10B981" stroke-width="4"/>
  
  <!-- Main commits -->
  <circle cx="70" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="70" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C1</text>
  
  <circle cx="130" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="130" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C2</text>
  
  <circle cx="190" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="190" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C3</text>
  
  <!-- Merge commit -->
  <circle cx="260" cy="130" r="14" fill="#F59E0B" stroke="#D97706" stroke-width="2"/>
  <text x="260" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">M</text>
  
  <!-- Feature branch for merge -->
  <path d="M 130 118 Q 150 80 180 80" stroke="#3B82F6" stroke-width="3" fill="none"/>
  <line x1="180" y1="80" x2="230" y2="80" stroke="#3B82F6" stroke-width="3"/>
  
  <!-- Feature commits -->
  <circle cx="180" cy="80" r="10" fill="#3B82F6" stroke="#1D4ED8" stroke-width="2"/>
  <text x="180" y="84" text-anchor="middle" font-family="Consolas, monospace" font-size="7" fill="white">F1</text>
  
  <circle cx="220" cy="80" r="10" fill="#3B82F6" stroke="#1D4ED8" stroke-width="2"/>
  <text x="220" y="84" text-anchor="middle" font-family="Consolas, monospace" font-size="7" fill="white">F2</text>
  
  <!-- Merge lines -->
  <path d="M 220 90 Q 240 110 260 118" stroke="#3B82F6" stroke-width="2" fill="none"/>
  <path d="M 190 142 L 248 142 Q 258 142 260 135" stroke="#10B981" stroke-width="2" fill="none"/>
  
  <!-- Merge explanation -->
  <text x="180" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Creates merge commit (M)</text>
  <text x="180" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Preserves complete history</text>
  <text x="180" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Non-destructive operation</text>
  <rect x="50" y="210" width="260" height="20" rx="4" fill="#D1FAE5"/>
  <text x="180" y="224" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#065F46">✓ Safe for shared branches</text>
  
  <!-- REBASE Section -->
  <rect x="365" y="65" width="310" height="175" rx="8" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="2"/>
  <text x="520" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#3B82F6">Rebase</text>
  
  <!-- Main branch for rebase -->
  <line x1="390" y1="130" x2="620" y2="130" stroke="#10B981" stroke-width="4"/>
  
  <!-- Main commits -->
  <circle cx="410" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="410" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C1</text>
  
  <circle cx="470" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="470" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C2</text>
  
  <circle cx="530" cy="130" r="12" fill="#10B981" stroke="#059669" stroke-width="2"/>
  <text x="530" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="8" fill="white">C3</text>
  
  <!-- Rebased commits (now linear on main) -->
  <circle cx="570" cy="130" r="10" fill="#3B82F6" stroke="#1D4ED8" stroke-width="2"/>
  <text x="570" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="7" fill="white">F1'</text>
  
  <circle cx="605" cy="130" r="10" fill="#3B82F6" stroke="#1D4ED8" stroke-width="2"/>
  <text x="605" y="134" text-anchor="middle" font-family="Consolas, monospace" font-size="7" fill="white">F2'</text>
  
  <!-- Ghost of original branch -->
  <path d="M 470 118 Q 490 85 510 85" stroke="#94A3B8" stroke-width="2" stroke-dasharray="4,2" fill="none" opacity="0.5"/>
  <line x1="510" y1="85" x2="560" y2="85" stroke="#94A3B8" stroke-width="2" stroke-dasharray="4,2" opacity="0.5"/>
  <circle cx="510" cy="85" r="8" fill="none" stroke="#94A3B8" stroke-width="2" stroke-dasharray="3,2" opacity="0.5"/>
  <circle cx="550" cy="85" r="8" fill="none" stroke="#94A3B8" stroke-width="2" stroke-dasharray="3,2" opacity="0.5"/>
  <text x="530" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#94A3B8">original (discarded)</text>
  
  <!-- Rebase explanation -->
  <text x="520" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Replays commits on top of main</text>
  <text x="520" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Creates linear history</text>
  <text x="520" y="200" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Rewrites commit history</text>
  <rect x="390" y="210" width="260" height="20" rx="4" fill="#FEE2E2"/>
  <text x="520" y="224" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#B91C1C">⚠ Never rebase shared branches!</text>
  
  <!-- Comparison Table -->
  <rect x="50" y="260" width="600" height="150" rx="8" fill="white" stroke="#E2E8F0" stroke-width="2"/>
  
  <!-- Table header -->
  <rect x="50" y="260" width="600" height="30" rx="8" fill="#F1F5F9"/>
  <text x="150" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">Aspect</text>
  <text x="320" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#10B981">Merge</text>
  <text x="530" y="280" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#3B82F6">Rebase</text>
  
  <!-- Column dividers -->
  <line x1="220" y1="260" x2="220" y2="410" stroke="#E2E8F0" stroke-width="1"/>
  <line x1="430" y1="260" x2="430" y2="410" stroke="#E2E8F0" stroke-width="1"/>
  
  <!-- Row 1 -->
  <text x="135" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">History</text>
  <text x="325" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Complete, non-linear</text>
  <text x="530" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Clean, linear</text>
  
  <line x1="60" y1="320" x2="640" y2="320" stroke="#F1F5F9" stroke-width="1"/>
  
  <!-- Row 2 -->
  <text x="135" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Commit IDs</text>
  <text x="325" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Preserved</text>
  <text x="530" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Changed (new hashes)</text>
  
  <line x1="60" y1="350" x2="640" y2="350" stroke="#F1F5F9" stroke-width="1"/>
  
  <!-- Row 3 -->
  <text x="135" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Best for</text>
  <text x="325" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Shared/public branches</text>
  <text x="530" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Local/private branches</text>
  
  <line x1="60" y1="380" x2="640" y2="380" stroke="#F1F5F9" stroke-width="1"/>
  
  <!-- Row 4 -->
  <text x="135" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#374151">Conflicts</text>
  <text x="325" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Resolved once</text>
  <text x="530" y="400" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">May repeat per commit</text>
  
  <!-- Caption -->
  <text x="350" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Figure 7.4: Merge vs Rebase - Integration Strategies Compared</text>
</svg>
