<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 520" width="500" height="520">
  <!-- Title -->
  <text x="250" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1F2937">MVC Flow Example: User Login</text>
  
  <!-- Step 1 -->
  <circle cx="50" cy="65" r="18" fill="#3B82F6"/>
  <text x="50" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">1</text>
  <text x="80" y="70" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">User submits login form</text>
  
  <!-- Arrow -->
  <line x1="50" y1="83" x2="50" y2="105" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,105 46,98 54,98" fill="#64748B"/>
  
  <!-- Step 2 -->
  <circle cx="50" cy="125" r="18" fill="#10B981"/>
  <text x="50" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">2</text>
  <text x="80" y="125" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">Controller receives POST /login</text>
  <text x="80" y="140" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#64748B" font-style="italic">(Routes request to appropriate handler)</text>
  
  <!-- Arrow -->
  <line x1="50" y1="143" x2="50" y2="165" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,165 46,158 54,158" fill="#64748B"/>
  
  <!-- Step 3 -->
  <circle cx="50" cy="185" r="18" fill="#10B981"/>
  <text x="50" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">3</text>
  <text x="80" y="185" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">Controller extracts credentials,</text>
  <text x="80" y="200" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">calls UserService.authenticate()</text>
  
  <!-- Arrow -->
  <line x1="50" y1="203" x2="50" y2="225" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,225 46,218 54,218" fill="#64748B"/>
  
  <!-- Step 4 -->
  <circle cx="50" cy="245" r="18" fill="#F59E0B"/>
  <text x="50" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">4</text>
  <text x="80" y="245" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">Model (UserService) validates</text>
  <text x="80" y="260" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">credentials against database</text>
  
  <!-- Arrow -->
  <line x1="50" y1="263" x2="50" y2="285" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,285 46,278 54,278" fill="#64748B"/>
  
  <!-- Step 5 -->
  <circle cx="50" cy="305" r="18" fill="#F59E0B"/>
  <text x="50" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">5</text>
  <text x="80" y="305" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">Model returns result to Controller</text>
  <text x="80" y="320" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#64748B" font-style="italic">(Success with user data or failure reason)</text>
  
  <!-- Arrow -->
  <line x1="50" y1="323" x2="50" y2="345" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,345 46,338 54,338" fill="#64748B"/>
  
  <!-- Step 6 -->
  <circle cx="50" cy="365" r="18" fill="#10B981"/>
  <text x="50" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">6</text>
  <text x="80" y="365" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">Controller selects appropriate View</text>
  <text x="80" y="380" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#64748B" font-style="italic">(Dashboard on success, error page on failure)</text>
  
  <!-- Arrow -->
  <line x1="50" y1="383" x2="50" y2="405" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="50,405 46,398 54,398" fill="#64748B"/>
  
  <!-- Step 7 -->
  <circle cx="50" cy="425" r="18" fill="#3B82F6"/>
  <text x="50" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" font-weight="bold">7</text>
  <text x="80" y="425" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">View renders response and</text>
  <text x="80" y="440" text-anchor="start" font-family="Arial, sans-serif" font-size="11" fill="#374151">returns to user</text>
  
  <!-- Legend -->
  <rect x="320" y="60" width="150" height="100" rx="6" fill="#F8FAFC" stroke="#E2E8F0" stroke-width="1"/>
  <text x="395" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#374151" font-weight="bold">Legend</text>
  
  <circle cx="340" cy="100" r="8" fill="#3B82F6"/>
  <text x="355" y="104" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#374151">View</text>
  
  <circle cx="340" cy="120" r="8" fill="#10B981"/>
  <text x="355" y="124" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#374151">Controller</text>
  
  <circle cx="340" cy="140" r="8" fill="#F59E0B"/>
  <text x="355" y="144" text-anchor="start" font-family="Arial, sans-serif" font-size="9" fill="#374151">Model</text>
  
  <!-- Caption -->
  <text x="250" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Figure 4.5: MVC Request/Response Flow - Login Example</text>
</svg>
