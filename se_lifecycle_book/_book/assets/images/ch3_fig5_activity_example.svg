<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 520" width="650" height="520">
  <!-- Title -->
  <text x="325" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1F2937">Activity Diagram: Order Process with Swimlanes</text>
  
  <!-- Swimlane Headers -->
  <rect x="40" y="45" width="180" height="30" rx="0" fill="#FEE2E2" stroke="#EF4444" stroke-width="1"/>
  <text x="130" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#DC2626" font-weight="bold">Customer</text>
  
  <rect x="220" y="45" width="180" height="30" rx="0" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
  <text x="310" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#1E40AF" font-weight="bold">System</text>
  
  <rect x="400" y="45" width="180" height="30" rx="0" fill="#D1FAE5" stroke="#10B981" stroke-width="1"/>
  <text x="490" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#059669" font-weight="bold">Warehouse</text>
  
  <!-- Swimlane Bodies -->
  <rect x="40" y="75" width="180" height="400" rx="0" fill="#FEF2F2" stroke="#FECACA" stroke-width="1"/>
  <rect x="220" y="75" width="180" height="400" rx="0" fill="#EFF6FF" stroke="#BFDBFE" stroke-width="1"/>
  <rect x="400" y="75" width="180" height="400" rx="0" fill="#ECFDF5" stroke="#A7F3D0" stroke-width="1"/>
  
  <!-- Initial Node -->
  <circle cx="130" cy="100" r="10" fill="#1F2937"/>
  
  <!-- Browse Catalog -->
  <rect x="75" y="125" width="110" height="35" rx="8" fill="#FECACA" stroke="#EF4444" stroke-width="1.5"/>
  <text x="130" y="147" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#991B1B">Browse Catalog</text>
  
  <!-- Arrow down -->
  <line x1="130" y1="110" x2="130" y2="125" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="130,125 126,118 134,118" fill="#64748B"/>
  
  <!-- Add to Cart -->
  <rect x="75" y="180" width="110" height="35" rx="8" fill="#FECACA" stroke="#EF4444" stroke-width="1.5"/>
  <text x="130" y="202" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#991B1B">Add to Cart</text>
  
  <line x1="130" y1="160" x2="130" y2="180" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="130,180 126,173 134,173" fill="#64748B"/>
  
  <!-- Decision: More items? -->
  <polygon points="130,235 155,255 130,275 105,255" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5"/>
  
  <line x1="130" y1="215" x2="130" y2="235" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="130,235 126,228 134,228" fill="#64748B"/>
  
  <!-- Loop back for more items -->
  <path d="M105 255 L60 255 L60 197 L75 197" stroke="#64748B" stroke-width="1.5" fill="none"/>
  <polygon points="75,197 68,193 68,201" fill="#64748B"/>
  <text x="55" y="225" text-anchor="end" font-family="Arial, sans-serif" font-size="8" fill="#64748B">[more]</text>
  
  <!-- Checkout -->
  <rect x="75" y="295" width="110" height="35" rx="8" fill="#FECACA" stroke="#EF4444" stroke-width="1.5"/>
  <text x="130" y="317" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#991B1B">Checkout</text>
  
  <line x1="130" y1="275" x2="130" y2="295" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="130,295 126,288 134,288" fill="#64748B"/>
  <text x="140" y="288" text-anchor="start" font-family="Arial, sans-serif" font-size="8" fill="#64748B">[done]</text>
  
  <!-- Enter Payment -->
  <rect x="75" y="350" width="110" height="35" rx="8" fill="#FECACA" stroke="#EF4444" stroke-width="1.5"/>
  <text x="130" y="372" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#991B1B">Enter Payment</text>
  
  <line x1="130" y1="330" x2="130" y2="350" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="130,350 126,343 134,343" fill="#64748B"/>
  
  <!-- Arrow to System -->
  <line x1="185" y1="367" x2="235" y2="367" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="235,367 228,363 228,371" fill="#64748B"/>
  
  <!-- Validate Payment -->
  <rect x="240" y="350" width="110" height="35" rx="8" fill="#BFDBFE" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="295" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1E40AF">Validate</text>
  <text x="295" y="377" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1E40AF">Payment</text>
  
  <!-- Decision: Valid? -->
  <polygon points="295,405 320,425 295,445 270,425" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1.5"/>
  
  <line x1="295" y1="385" x2="295" y2="405" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="295,405 291,398 299,398" fill="#64748B"/>
  
  <!-- Invalid path back -->
  <path d="M270 425 L240 425 L240 380 L130 380 L130 385" stroke="#64748B" stroke-width="1.5" fill="none"/>
  <polygon points="130,385 126,378 134,378" fill="#64748B"/>
  <text x="235" y="418" text-anchor="end" font-family="Arial, sans-serif" font-size="8" fill="#64748B">[invalid]</text>
  
  <!-- Fork bar -->
  <rect x="280" y="460" width="100" height="5" rx="1" fill="#374151"/>
  <line x1="295" y1="445" x2="295" y2="460" stroke="#64748B" stroke-width="1.5"/>
  <text x="325" y="453" text-anchor="start" font-family="Arial, sans-serif" font-size="8" fill="#64748B">[valid]</text>
  
  <!-- Create Order -->
  <rect x="240" y="175" width="110" height="35" rx="8" fill="#BFDBFE" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="295" y="197" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#1E40AF">Create Order</text>
  
  <!-- Send Email -->
  <rect x="240" y="230" width="110" height="35" rx="8" fill="#BFDBFE" stroke="#3B82F6" stroke-width="1.5"/>
  <text x="295" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1E40AF">Send</text>
  <text x="295" y="257" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#1E40AF">Confirmation</text>
  
  <!-- Fork outputs -->
  <line x1="295" y1="465" x2="295" y2="212" stroke="#64748B" stroke-width="1.5"/>
  <line x1="295" y1="212" x2="295" y2="210" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="295,210 291,217 299,217" fill="#64748B"/>
  
  <line x1="295" y1="210" x2="295" y2="230" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="295,230 291,223 299,223" fill="#64748B"/>
  
  <!-- To Warehouse -->
  <line x1="350" y1="463" x2="490" y2="463" stroke="#64748B" stroke-width="1.5"/>
  <line x1="490" y1="463" x2="490" y2="150" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="490,150 486,157 494,157" fill="#64748B"/>
  
  <!-- Pick Items -->
  <rect x="435" y="150" width="110" height="35" rx="8" fill="#A7F3D0" stroke="#10B981" stroke-width="1.5"/>
  <text x="490" y="172" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#047857">Pick Items</text>
  
  <!-- Pack Order -->
  <rect x="435" y="205" width="110" height="35" rx="8" fill="#A7F3D0" stroke="#10B981" stroke-width="1.5"/>
  <text x="490" y="227" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#047857">Pack Order</text>
  
  <line x1="490" y1="185" x2="490" y2="205" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="490,205 486,198 494,198" fill="#64748B"/>
  
  <!-- Ship Order -->
  <rect x="435" y="260" width="110" height="35" rx="8" fill="#A7F3D0" stroke="#10B981" stroke-width="1.5"/>
  <text x="490" y="282" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#047857">Ship Order</text>
  
  <line x1="490" y1="240" x2="490" y2="260" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="490,260 486,253 494,253" fill="#64748B"/>
  
  <!-- Join bar -->
  <rect x="280" y="115" width="220" height="5" rx="1" fill="#374151"/>
  
  <!-- From Ship to Join -->
  <line x1="490" y1="295" x2="490" y2="115" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- From Send Email to Join -->
  <line x1="295" y1="265" x2="295" y2="115" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- Final Node -->
  <line x1="390" y1="120" x2="390" y2="95" stroke="#64748B" stroke-width="1.5"/>
  <circle cx="390" cy="90" r="12" fill="none" stroke="#1F2937" stroke-width="2"/>
  <circle cx="390" cy="90" r="6" fill="#1F2937"/>
  
  <!-- Caption -->
  <text x="325" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Figure 3.5: Activity Diagram Example - Order Processing with Parallel Activities</text>
</svg>
