<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 550 420" width="550" height="420">
  <!-- Title -->
  <text x="275" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1F2937">Template Method Pattern</text>
  <text x="275" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#64748B">Define algorithm skeleton in base class; subclasses override specific steps</text>
  
  <!-- Abstract Class -->
  <rect x="125" y="60" width="300" height="160" rx="0" fill="white" stroke="#3B82F6" stroke-width="2"/>
  <rect x="125" y="60" width="300" height="28" rx="0" fill="#DBEAFE"/>
  <text x="275" y="79" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1E40AF" font-weight="bold" font-style="italic">AbstractClass «abstract»</text>
  <line x1="125" y1="88" x2="425" y2="88" stroke="#3B82F6" stroke-width="1"/>
  
  <!-- templateMethod -->
  <text x="135" y="108" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151" font-weight="bold">+ templateMethod(): void</text>
  <text x="145" y="123" text-anchor="start" font-family="Consolas, monospace" font-size="8" fill="#64748B">  step1()</text>
  <text x="145" y="136" text-anchor="start" font-family="Consolas, monospace" font-size="8" fill="#64748B">  step2()  // abstract</text>
  <text x="145" y="149" text-anchor="start" font-family="Consolas, monospace" font-size="8" fill="#64748B">  step3()  // abstract</text>
  <text x="145" y="162" text-anchor="start" font-family="Consolas, monospace" font-size="8" fill="#64748B">  step4()</text>
  
  <line x1="125" y1="170" x2="425" y2="170" stroke="#3B82F6" stroke-width="1"/>
  
  <!-- Protected methods -->
  <text x="135" y="188" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151"># step1(): void</text>
  <text x="135" y="203" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151" font-style="italic"># step2(): void {abstract}</text>
  <text x="135" y="218" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151" font-style="italic"># step3(): void {abstract}</text>
  
  <!-- Inheritance line -->
  <line x1="275" y1="220" x2="275" y2="250" stroke="#64748B" stroke-width="1.5"/>
  <line x1="150" y1="250" x2="400" y2="250" stroke="#64748B" stroke-width="1.5"/>
  <polygon points="275,220 270,230 280,230" fill="white" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- Vertical lines -->
  <line x1="150" y1="250" x2="150" y2="275" stroke="#64748B" stroke-width="1.5"/>
  <line x1="400" y1="250" x2="400" y2="275" stroke="#64748B" stroke-width="1.5"/>
  
  <!-- ConcreteClassA -->
  <rect x="50" y="280" width="200" height="70" rx="0" fill="white" stroke="#10B981" stroke-width="2"/>
  <rect x="50" y="280" width="200" height="25" rx="0" fill="#D1FAE5"/>
  <text x="150" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065F46" font-weight="bold">ConcreteClassA</text>
  <line x1="50" y1="305" x2="250" y2="305" stroke="#10B981" stroke-width="1"/>
  <text x="60" y="323" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151"># step2(): void</text>
  <text x="60" y="338" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151"># step3(): void</text>
  
  <!-- ConcreteClassB -->
  <rect x="300" y="280" width="200" height="70" rx="0" fill="white" stroke="#F59E0B" stroke-width="2"/>
  <rect x="300" y="280" width="200" height="25" rx="0" fill="#FEF3C7"/>
  <text x="400" y="297" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#92400E" font-weight="bold">ConcreteClassB</text>
  <line x1="300" y1="305" x2="500" y2="305" stroke="#F59E0B" stroke-width="1"/>
  <text x="310" y="323" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151"># step2(): void</text>
  <text x="310" y="338" text-anchor="start" font-family="Consolas, monospace" font-size="9" fill="#374151"># step3(): void</text>
  
  <!-- Note -->
  <text x="275" y="375" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#64748B">Algorithm structure is fixed in templateMethod() • Subclasses customize only specific steps</text>
  
  <!-- Caption -->
  <text x="275" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Figure 4.23: Template Method Pattern Structure</text>
</svg>
