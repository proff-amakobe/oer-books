<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Chapter 4: Software Architecture and Design Patterns – The Complete Software Engineering Lifecycle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/05-ui-ux.html" rel="next">
<link href="../chapters/03-systems-modeling.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-9b98f18118eee809be1c051eb5cc78e4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../chapters/04-software-architecture.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Chapter 4: Software Architecture and Design Patterns</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">The Complete Software Engineering Lifecycle</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The Complete Software Engineering Lifecycle</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Preface</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../acknowledgments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Acknowledgments</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/01-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Chapter 1: Introduction to Software Engineering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/02-requirements-engineering.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Chapter 2: Requirements Engineering</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/03-systems-modeling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Chapter 3: Systems Modeling and UML</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/04-software-architecture.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Chapter 4: Software Architecture and Design Patterns</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/05-ui-ux.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Chapter 5: UI/UX Design and Prototyping</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/06-agile-methodologies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Chapter 6: Agile Methodologies and Project Management</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/07-version-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Chapter 7: Version Control Workflows</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/09-cicd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Chapter 9: Continuous Integration and Continuous Deployment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/10-data-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Chapter 10: Data Management and APIs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/11-cloud-services.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Chapter 11: Cloud Services and Deployment</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/12-security.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Chapter 12: Software Security</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/13-maintenance-evolution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Chapter 13: Software Maintenance and Evolution</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/14-ethics-professionalism.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Chapter 14: Professional Practice and Ethics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/15-final-project-integration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Chapter 15: Final Project Integration and Course Synthesis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Glossary</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-objectives" id="toc-learning-objectives" class="nav-link active" data-scroll-target="#learning-objectives"><span class="header-section-number">7.1</span> Learning Objectives</a></li>
  <li><a href="#what-is-software-architecture" id="toc-what-is-software-architecture" class="nav-link" data-scroll-target="#what-is-software-architecture"><span class="header-section-number">7.2</span> 4.1 What Is Software Architecture?</a>
  <ul class="collapse">
  <li><a href="#why-architecture-matters" id="toc-why-architecture-matters" class="nav-link" data-scroll-target="#why-architecture-matters"><span class="header-section-number">7.2.1</span> 4.1.1 Why Architecture Matters</a></li>
  <li><a href="#architecture-vs.-design" id="toc-architecture-vs.-design" class="nav-link" data-scroll-target="#architecture-vs.-design"><span class="header-section-number">7.2.2</span> 4.1.2 Architecture vs.&nbsp;Design</a></li>
  <li><a href="#the-role-of-the-software-architect" id="toc-the-role-of-the-software-architect" class="nav-link" data-scroll-target="#the-role-of-the-software-architect"><span class="header-section-number">7.2.3</span> 4.1.3 The Role of the Software Architect</a></li>
  </ul></li>
  <li><a href="#architectural-styles-and-patterns" id="toc-architectural-styles-and-patterns" class="nav-link" data-scroll-target="#architectural-styles-and-patterns"><span class="header-section-number">7.3</span> 4.2 Architectural Styles and Patterns</a>
  <ul class="collapse">
  <li><a href="#layered-architecture" id="toc-layered-architecture" class="nav-link" data-scroll-target="#layered-architecture"><span class="header-section-number">7.3.1</span> 4.2.1 Layered Architecture</a></li>
  <li><a href="#model-view-controller-mvc" id="toc-model-view-controller-mvc" class="nav-link" data-scroll-target="#model-view-controller-mvc"><span class="header-section-number">7.3.2</span> 4.2.2 Model-View-Controller (MVC)</a></li>
  <li><a href="#microservices-architecture" id="toc-microservices-architecture" class="nav-link" data-scroll-target="#microservices-architecture"><span class="header-section-number">7.3.3</span> 4.2.3 Microservices Architecture</a></li>
  <li><a href="#event-driven-architecture" id="toc-event-driven-architecture" class="nav-link" data-scroll-target="#event-driven-architecture"><span class="header-section-number">7.3.4</span> 4.2.4 Event-Driven Architecture</a></li>
  <li><a href="#monolithic-architecture" id="toc-monolithic-architecture" class="nav-link" data-scroll-target="#monolithic-architecture"><span class="header-section-number">7.3.5</span> 4.2.5 Monolithic Architecture</a></li>
  <li><a href="#comparing-architectural-styles" id="toc-comparing-architectural-styles" class="nav-link" data-scroll-target="#comparing-architectural-styles"><span class="header-section-number">7.3.6</span> 4.2.6 Comparing Architectural Styles</a></li>
  </ul></li>
  <li><a href="#the-solid-principles" id="toc-the-solid-principles" class="nav-link" data-scroll-target="#the-solid-principles"><span class="header-section-number">7.4</span> 4.3 The SOLID Principles</a>
  <ul class="collapse">
  <li><a href="#single-responsibility-principle-srp" id="toc-single-responsibility-principle-srp" class="nav-link" data-scroll-target="#single-responsibility-principle-srp"><span class="header-section-number">7.4.1</span> 4.3.1 Single Responsibility Principle (SRP)</a></li>
  <li><a href="#openclosed-principle-ocp" id="toc-openclosed-principle-ocp" class="nav-link" data-scroll-target="#openclosed-principle-ocp"><span class="header-section-number">7.4.2</span> 4.3.2 Open/Closed Principle (OCP)</a></li>
  <li><a href="#liskov-substitution-principle-lsp" id="toc-liskov-substitution-principle-lsp" class="nav-link" data-scroll-target="#liskov-substitution-principle-lsp"><span class="header-section-number">7.4.3</span> 4.3.3 Liskov Substitution Principle (LSP)</a></li>
  <li><a href="#interface-segregation-principle-isp" id="toc-interface-segregation-principle-isp" class="nav-link" data-scroll-target="#interface-segregation-principle-isp"><span class="header-section-number">7.4.4</span> 4.3.4 Interface Segregation Principle (ISP)</a></li>
  <li><a href="#dependency-inversion-principle-dip" id="toc-dependency-inversion-principle-dip" class="nav-link" data-scroll-target="#dependency-inversion-principle-dip"><span class="header-section-number">7.4.5</span> 4.3.5 Dependency Inversion Principle (DIP)</a></li>
  <li><a href="#solid-summary" id="toc-solid-summary" class="nav-link" data-scroll-target="#solid-summary"><span class="header-section-number">7.4.6</span> 4.3.6 SOLID Summary</a></li>
  </ul></li>
  <li><a href="#design-patterns" id="toc-design-patterns" class="nav-link" data-scroll-target="#design-patterns"><span class="header-section-number">7.5</span> 4.4 Design Patterns</a>
  <ul class="collapse">
  <li><a href="#creational-patterns" id="toc-creational-patterns" class="nav-link" data-scroll-target="#creational-patterns"><span class="header-section-number">7.5.1</span> 4.4.1 Creational Patterns</a></li>
  <li><a href="#structural-patterns" id="toc-structural-patterns" class="nav-link" data-scroll-target="#structural-patterns"><span class="header-section-number">7.5.2</span> 4.4.2 Structural Patterns</a></li>
  <li><a href="#behavioral-patterns" id="toc-behavioral-patterns" class="nav-link" data-scroll-target="#behavioral-patterns"><span class="header-section-number">7.5.3</span> 4.4.3 Behavioral Patterns</a></li>
  <li><a href="#design-patterns-summary" id="toc-design-patterns-summary" class="nav-link" data-scroll-target="#design-patterns-summary"><span class="header-section-number">7.5.4</span> 4.4.4 Design Patterns Summary</a></li>
  </ul></li>
  <li><a href="#the-software-architecture-document-sad" id="toc-the-software-architecture-document-sad" class="nav-link" data-scroll-target="#the-software-architecture-document-sad"><span class="header-section-number">7.6</span> 4.5 The Software Architecture Document (SAD)</a>
  <ul class="collapse">
  <li><a href="#purpose-of-the-sad" id="toc-purpose-of-the-sad" class="nav-link" data-scroll-target="#purpose-of-the-sad"><span class="header-section-number">7.6.1</span> 4.5.1 Purpose of the SAD</a></li>
  <li><a href="#sad-structure" id="toc-sad-structure" class="nav-link" data-scroll-target="#sad-structure"><span class="header-section-number">7.6.2</span> 4.5.2 SAD Structure</a></li>
  <li><a href="#the-41-view-model" id="toc-the-41-view-model" class="nav-link" data-scroll-target="#the-41-view-model"><span class="header-section-number">7.6.3</span> 4.5.3 The 4+1 View Model</a></li>
  <li><a href="#architecture-decision-records-adrs" id="toc-architecture-decision-records-adrs" class="nav-link" data-scroll-target="#architecture-decision-records-adrs"><span class="header-section-number">7.6.4</span> 4.5.4 Architecture Decision Records (ADRs)</a></li>
  </ul></li>
  <li><a href="#making-architectural-decisions" id="toc-making-architectural-decisions" class="nav-link" data-scroll-target="#making-architectural-decisions"><span class="header-section-number">7.7</span> 4.6 Making Architectural Decisions</a>
  <ul class="collapse">
  <li><a href="#factors-in-architectural-decisions" id="toc-factors-in-architectural-decisions" class="nav-link" data-scroll-target="#factors-in-architectural-decisions"><span class="header-section-number">7.7.1</span> 4.6.1 Factors in Architectural Decisions</a></li>
  <li><a href="#common-trade-offs" id="toc-common-trade-offs" class="nav-link" data-scroll-target="#common-trade-offs"><span class="header-section-number">7.7.2</span> 4.6.2 Common Trade-offs</a></li>
  <li><a href="#evaluating-architectures" id="toc-evaluating-architectures" class="nav-link" data-scroll-target="#evaluating-architectures"><span class="header-section-number">7.7.3</span> 4.6.3 Evaluating Architectures</a></li>
  </ul></li>
  <li><a href="#chapter-summary" id="toc-chapter-summary" class="nav-link" data-scroll-target="#chapter-summary"><span class="header-section-number">7.8</span> 4.7 Chapter Summary</a></li>
  <li><a href="#key-terms" id="toc-key-terms" class="nav-link" data-scroll-target="#key-terms"><span class="header-section-number">7.9</span> 4.8 Key Terms</a></li>
  <li><a href="#review-questions" id="toc-review-questions" class="nav-link" data-scroll-target="#review-questions"><span class="header-section-number">7.10</span> 4.9 Review Questions</a></li>
  <li><a href="#hands-on-exercises" id="toc-hands-on-exercises" class="nav-link" data-scroll-target="#hands-on-exercises"><span class="header-section-number">7.11</span> 4.10 Hands-On Exercises</a>
  <ul class="collapse">
  <li><a href="#exercise-4.1-identifying-architectural-styles" id="toc-exercise-4.1-identifying-architectural-styles" class="nav-link" data-scroll-target="#exercise-4.1-identifying-architectural-styles"><span class="header-section-number">7.11.1</span> Exercise 4.1: Identifying Architectural Styles</a></li>
  <li><a href="#exercise-4.2-solid-refactoring" id="toc-exercise-4.2-solid-refactoring" class="nav-link" data-scroll-target="#exercise-4.2-solid-refactoring"><span class="header-section-number">7.11.2</span> Exercise 4.2: SOLID Refactoring</a></li>
  <li><a href="#exercise-4.3-implementing-design-patterns" id="toc-exercise-4.3-implementing-design-patterns" class="nav-link" data-scroll-target="#exercise-4.3-implementing-design-patterns"><span class="header-section-number">7.11.3</span> Exercise 4.3: Implementing Design Patterns</a></li>
  <li><a href="#exercise-4.4-architecture-analysis" id="toc-exercise-4.4-architecture-analysis" class="nav-link" data-scroll-target="#exercise-4.4-architecture-analysis"><span class="header-section-number">7.11.4</span> Exercise 4.4: Architecture Analysis</a></li>
  <li><a href="#exercise-4.5-software-architecture-document" id="toc-exercise-4.5-software-architecture-document" class="nav-link" data-scroll-target="#exercise-4.5-software-architecture-document"><span class="header-section-number">7.11.5</span> Exercise 4.5: Software Architecture Document</a></li>
  <li><a href="#exercise-4.6-pattern-recognition" id="toc-exercise-4.6-pattern-recognition" class="nav-link" data-scroll-target="#exercise-4.6-pattern-recognition"><span class="header-section-number">7.11.6</span> Exercise 4.6: Pattern Recognition</a></li>
  </ul></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">7.12</span> 4.11 Further Reading</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">7.13</span> References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Chapter 4: Software Architecture and Design Patterns</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="learning-objectives" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="learning-objectives"><span class="header-section-number">7.1</span> Learning Objectives</h2>
<p>By the end of this chapter, you will be able to:</p>
<ul>
<li>Define software architecture and explain its importance in system development</li>
<li>Compare and contrast major architectural styles and patterns</li>
<li>Apply the SOLID principles to create maintainable, flexible designs</li>
<li>Recognize and implement common creational, structural, and behavioral design patterns</li>
<li>Make informed architectural decisions based on system requirements</li>
<li>Create a Software Architecture Document (SAD) for a project</li>
<li>Evaluate trade-offs between different architectural approaches</li>
</ul>
<hr>
</section>
<section id="what-is-software-architecture" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="what-is-software-architecture"><span class="header-section-number">7.2</span> 4.1 What Is Software Architecture?</h2>
<p>When you look at a building, you don’t see a random pile of bricks, steel, and glass. You see structure: floors stacked upon floors, walls dividing spaces, a roof keeping out the rain. That structure isn’t accidental—an architect designed it to serve the building’s purpose while meeting constraints of physics, budget, and building codes.</p>
<p>Software systems have architecture too. While you can’t see or touch it, the architecture profoundly affects how the system behaves, how it can be modified, and whether it will succeed or fail over its lifetime.</p>
<p><strong>Software architecture</strong> refers to the fundamental structures of a software system, the discipline of creating such structures, and the documentation of these structures. It encompasses the high-level decisions about how components are organized, how they communicate, and how the system achieves its quality requirements.</p>
<section id="why-architecture-matters" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="why-architecture-matters"><span class="header-section-number">7.2.1</span> 4.1.1 Why Architecture Matters</h3>
<p>Architecture decisions are among the most consequential choices in software development. They’re also among the hardest to change later.</p>
<p><strong>Early decisions with lasting impact</strong>: Architectural choices made in the first weeks of a project constrain what’s possible for years afterward. Choosing a monolithic architecture means you can’t easily scale individual components. Choosing microservices means you need to handle distributed system complexity. Neither choice is inherently right or wrong, but both have long-lasting consequences.</p>
<p><strong>Quality attributes depend on architecture</strong>: How fast is your system? How reliable? How secure? How easy to modify? These quality attributes aren’t primarily determined by code quality—they emerge from architectural decisions. A well-designed system can be fast and reliable even with some sloppy code. A poorly architected system will struggle no matter how carefully each line is written.</p>
<p><strong>Communication framework</strong>: Architecture provides a vocabulary for discussing the system. When you say “the payment service calls the order service,” everyone understands what you mean. Without architecture, conversations about the system devolve into discussions of individual files and functions.</p>
<p><strong>Risk management</strong>: Architectural decisions address the biggest risks in a project. If scalability is critical, the architecture must support it from the start. If security is paramount, architectural controls must be in place. Trying to add these qualities later is expensive at best, impossible at worst.</p>
</section>
<section id="architecture-vs.-design" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="architecture-vs.-design"><span class="header-section-number">7.2.2</span> 4.1.2 Architecture vs.&nbsp;Design</h3>
<p>People often confuse software architecture with software design, and the boundary between them is genuinely fuzzy. Here’s a useful distinction:</p>
<p><strong>Architecture</strong> concerns the decisions that are:</p>
<ul>
<li>Hard to change later</li>
<li>Affect multiple components or the entire system</li>
<li>Related to quality attributes (performance, security, maintainability)</li>
<li>About structure at a high level of abstraction</li>
</ul>
<p><strong>Design</strong> concerns the decisions that are:</p>
<ul>
<li>Relatively easy to change</li>
<li>Affect individual components or modules</li>
<li>Related to implementing specific functionality</li>
<li>About structure at a lower level of abstraction</li>
</ul>
<p>Consider a house analogy: Architecture is deciding to have three stories, placing load-bearing walls, and running plumbing through certain walls. Design is choosing cabinet hardware, paint colors, and light fixtures. You can change the paint without affecting the building’s structure; you can’t easily move a load-bearing wall.</p>
<p>In software, architecture might decide that the system uses a microservices approach with an API gateway, message queues for asynchronous communication, and a separate database per service. Design might decide that a particular service uses the Repository pattern for data access, or that a specific class uses the Strategy pattern for algorithm selection.</p>
<p>The line between architecture and design shifts based on context. In a small application, the decision to use a particular database might be “just design.” In a large enterprise system, that same decision might be architectural because it affects so many components.</p>
</section>
<section id="the-role-of-the-software-architect" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="the-role-of-the-software-architect"><span class="header-section-number">7.2.3</span> 4.1.3 The Role of the Software Architect</h3>
<p>In some organizations, “software architect” is a formal title held by senior technical staff. In others, architecture is a responsibility shared among the team. Either way, architectural thinking involves:</p>
<p><strong>Understanding requirements</strong>: Both functional requirements and quality attributes (often called non-functional requirements). A system that needs to handle 100 users has different architectural needs than one serving 10 million.</p>
<p><strong>Making trade-offs</strong>: Every architectural decision involves trade-offs. Microservices offer scalability but add complexity. Caching improves performance but risks stale data. The architect’s job is to make these trade-offs explicitly and wisely.</p>
<p><strong>Communicating decisions</strong>: Architecture must be documented and communicated. If the team doesn’t understand the architecture, they’ll inadvertently undermine it with every coding decision.</p>
<p><strong>Evolving the architecture</strong>: Requirements change. Technology evolves. Architectures must adapt. The best architectures anticipate change and make evolution possible.</p>
<hr>
</section>
</section>
<section id="architectural-styles-and-patterns" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="architectural-styles-and-patterns"><span class="header-section-number">7.3</span> 4.2 Architectural Styles and Patterns</h2>
<p>An <strong>architectural style</strong> is a named collection of architectural decisions that are commonly applied in a given context, along with the constraints that produce certain desirable qualities. Think of architectural styles as templates or patterns that have proven effective for certain types of systems.</p>
<p>Let’s explore the major architectural styles you’ll encounter in modern software development.</p>
<section id="layered-architecture" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="layered-architecture"><span class="header-section-number">7.3.1</span> 4.2.1 Layered Architecture</h3>
<p>The <strong>layered architecture</strong> (also called n-tier architecture) organizes the system into horizontal layers, each providing services to the layer above it and consuming services from the layer below.</p>
<p><img src="../assets/images/ch4_fig1_layered_architecture.svg" class="img-fluid"></p>
<p><strong>Key Principles:</strong></p>
<ul>
<li>Each layer has a specific responsibility</li>
<li>Layers only communicate with adjacent layers (typically downward)</li>
<li>Higher layers depend on lower layers, not vice versa</li>
<li>Each layer can be developed and tested somewhat independently</li>
</ul>
<p><strong>Common Layer Configurations:</strong></p>
<p><strong>Three-tier architecture</strong>:</p>
<ol type="1">
<li>Presentation (UI)</li>
<li>Business Logic</li>
<li>Data</li>
</ol>
<p><strong>Four-tier architecture</strong>:</p>
<ol type="1">
<li>Presentation</li>
<li>Application/API</li>
<li>Business Logic</li>
<li>Data</li>
</ol>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Separation of concerns</strong>: Each layer focuses on one aspect of the system</li>
<li><strong>Testability</strong>: Layers can be tested independently with mocks for adjacent layers</li>
<li><strong>Maintainability</strong>: Changes to one layer typically don’t affect others</li>
<li><strong>Team organization</strong>: Different teams can work on different layers</li>
<li><strong>Familiar pattern</strong>: Well understood by most developers</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Performance overhead</strong>: Requests must pass through all layers</li>
<li><strong>Monolithic deployment</strong>: Usually deployed as a single unit</li>
<li><strong>Rigidity</strong>: Strict layering can feel constraining</li>
<li><strong>God classes risk</strong>: Business logic layer can become bloated</li>
</ul>
<p><strong>When to Use:</strong></p>
<ul>
<li>Traditional enterprise applications</li>
<li>Applications with clear separation between presentation, logic, and data</li>
<li>Teams familiar with this pattern</li>
<li>Systems where simplicity is valued over flexibility</li>
</ul>
<p><strong>Example Structure (Web Application):</strong></p>
<pre><code>src/
├── presentation/
│   ├── controllers/
│   │   ├── UserController.java
│   │   └── OrderController.java
│   └── views/
│       └── ...
├── business/
│   ├── services/
│   │   ├── UserService.java
│   │   └── OrderService.java
│   └── domain/
│       ├── User.java
│       └── Order.java
├── data/
│   ├── repositories/
│   │   ├── UserRepository.java
│   │   └── OrderRepository.java
│   └── entities/
│       └── ...
└── config/
    └── ...</code></pre>
</section>
<section id="model-view-controller-mvc" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="model-view-controller-mvc"><span class="header-section-number">7.3.2</span> 4.2.2 Model-View-Controller (MVC)</h3>
<p><strong>MVC</strong> is an architectural pattern that separates an application into three interconnected components, originally developed for desktop GUIs but now ubiquitous in web applications.</p>
<p><img src="../assets/images/ch4_fig2_mvc_pattern.svg" class="img-fluid"></p>
<p><strong>Components:</strong></p>
<p><strong>Model</strong>: Manages the data, logic, and rules of the application. It’s independent of the user interface. When data changes, the model notifies observers (often the view).</p>
<p><strong>View</strong>: Presents data to the user. It receives data from the model and renders it. Multiple views can display the same model data differently.</p>
<p><strong>Controller</strong>: Accepts input from the user (via the view), converts it to commands for the model or view. It’s the intermediary between user interaction and system response.</p>
<p><strong>MVC Variants:</strong></p>
<p><strong>Traditional MVC</strong> (as above): Model notifies View directly of changes.</p>
<p><strong>MVP (Model-View-Presenter)</strong>: The Presenter mediates all communication between Model and View. The View is passive.</p>
<p><img src="../assets/images/ch4_fig11_mvp_pattern.svg" class="img-fluid"></p>
<p><strong>MVVM (Model-View-ViewModel)</strong>: Common in modern frontend frameworks. ViewModel exposes data streams that the View binds to.</p>
<p><img src="../assets/images/ch4_fig12_mvvm_pattern.svg" class="img-fluid"></p>
<p><strong>MVC in Web Frameworks:</strong></p>
<p>Most web frameworks implement a variation of MVC:</p>
<ul>
<li><strong>Ruby on Rails</strong>: Traditional MVC with ActiveRecord models</li>
<li><strong>Django</strong>: Often called MTV (Model-Template-View)</li>
<li><strong>Spring MVC</strong>: Java-based MVC framework</li>
<li><strong>ASP.NET MVC</strong>: Microsoft’s MVC implementation</li>
<li><strong>Express.js</strong>: Flexible, but commonly structured as MVC</li>
</ul>
<p><strong>Example Flow (Web Application):</strong></p>
<p><img src="../assets/images/ch4_fig13_mvc_flow.svg" class="img-fluid"></p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Clear separation of concerns</li>
<li>Multiple views for same data</li>
<li>Easier testing (test model independently)</li>
<li>Parallel development (UI team and backend team)</li>
<li>Well-supported by many frameworks</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Can be complex for simple applications</li>
<li>Controllers can become bloated (“fat controllers”)</li>
<li>Tight coupling between View and Controller</li>
<li>Learning curve for proper implementation</li>
</ul>
</section>
<section id="microservices-architecture" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="microservices-architecture"><span class="header-section-number">7.3.3</span> 4.2.3 Microservices Architecture</h3>
<p><strong>Microservices architecture</strong> structures an application as a collection of small, autonomous services that communicate over a network. Each service is independently deployable, scalable, and can be written in different programming languages.</p>
<p><img src="../assets/images/ch4_fig3_microservices.svg" class="img-fluid"></p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Single responsibility</strong>: Each service does one thing well</li>
<li><strong>Autonomy</strong>: Services are independently deployable</li>
<li><strong>Decentralized data</strong>: Each service manages its own database</li>
<li><strong>Smart endpoints, dumb pipes</strong>: Services contain the logic; communication infrastructure is simple</li>
<li><strong>Design for failure</strong>: Services expect other services to fail</li>
<li><strong>Evolutionary design</strong>: Easy to replace or rewrite individual services</li>
</ul>
<p><strong>Service Communication:</strong></p>
<p><strong>Synchronous (Request-Response)</strong>:</p>
<ul>
<li>REST APIs over HTTP</li>
<li>gRPC for high-performance communication</li>
<li>GraphQL for flexible querying</li>
</ul>
<p><strong>Asynchronous (Event-Based)</strong>:</p>
<ul>
<li>Message queues (RabbitMQ, Amazon SQS)</li>
<li>Event streaming (Apache Kafka)</li>
<li>Pub/sub patterns</li>
</ul>
<p><strong>Common Microservices Patterns:</strong></p>
<p><strong>API Gateway</strong>: Single entry point that routes requests to appropriate services, handles cross-cutting concerns (authentication, rate limiting).</p>
<p><strong>Service Discovery</strong>: Services register themselves and discover other services dynamically (Consul, Eureka, Kubernetes).</p>
<p><strong>Circuit Breaker</strong>: Prevents cascade failures by stopping calls to failing services temporarily.</p>
<p><strong>Saga Pattern</strong>: Manages distributed transactions across multiple services.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Independent deployment</strong>: Update one service without deploying the entire system</li>
<li><strong>Technology flexibility</strong>: Use different languages/frameworks for different services</li>
<li><strong>Scalability</strong>: Scale individual services based on demand</li>
<li><strong>Resilience</strong>: Failure in one service doesn’t bring down the whole system</li>
<li><strong>Team autonomy</strong>: Teams own their services end-to-end</li>
<li><strong>Easier to understand</strong>: Each service is small and focused</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Distributed system complexity</strong>: Network failures, latency, data consistency</li>
<li><strong>Operational overhead</strong>: Many services to deploy, monitor, and manage</li>
<li><strong>Testing challenges</strong>: Integration testing is complex</li>
<li><strong>Data consistency</strong>: No ACID transactions across services</li>
<li><strong>Initial development speed</strong>: More infrastructure to set up</li>
<li><strong>Debugging difficulty</strong>: Requests span multiple services</li>
</ul>
<p><strong>When to Use:</strong></p>
<ul>
<li>Large, complex applications</li>
<li>Systems requiring high scalability</li>
<li>Organizations with multiple autonomous teams</li>
<li>Systems with varying scalability needs across components</li>
<li>When technology diversity is beneficial</li>
</ul>
<p><strong>When to Avoid:</strong></p>
<ul>
<li>Small applications or startups (start with a modular monolith)</li>
<li>Teams without DevOps expertise</li>
<li>Applications where strong consistency is critical</li>
<li>When operational maturity is low</li>
</ul>
</section>
<section id="event-driven-architecture" class="level3" data-number="7.3.4">
<h3 data-number="7.3.4" class="anchored" data-anchor-id="event-driven-architecture"><span class="header-section-number">7.3.4</span> 4.2.4 Event-Driven Architecture</h3>
<p><strong>Event-driven architecture</strong> (EDA) is built around the production, detection, consumption, and reaction to events. An event represents a significant change in state.</p>
<p><img src="../assets/images/ch4_fig4_event_driven.svg" class="img-fluid"></p>
<p><strong>Key Concepts:</strong></p>
<p><strong>Event</strong>: A record of something that happened. Events are immutable facts. “OrderPlaced,” “UserRegistered,” “PaymentReceived.”</p>
<p><strong>Event Producer</strong>: A component that detects or creates events and publishes them.</p>
<p><strong>Event Consumer</strong>: A component that listens for events and reacts to them.</p>
<p><strong>Event Channel</strong>: The mechanism that transports events from producers to consumers (message queue, event stream).</p>
<p><strong>Event-Driven Patterns:</strong></p>
<p><strong>Simple Event Notification</strong>: Producer publishes an event; consumers react. The event contains minimal data—just that something happened.</p>
<pre><code>Event: { type: "OrderPlaced", orderId: "12345", timestamp: "..." }</code></pre>
<p><strong>Event-Carried State Transfer</strong>: Events contain all data needed by consumers, reducing the need for callbacks.</p>
<pre><code>Event: { 
  type: "OrderPlaced", 
  orderId: "12345",
  customer: { id: "789", name: "Alice", email: "..." },
  items: [...],
  total: 150.00
}</code></pre>
<p><strong>Event Sourcing</strong>: Instead of storing current state, store the sequence of events that led to current state. The current state is derived by replaying events.</p>
<pre><code>Events for Account #123:
1. AccountOpened { amount: 0 }
2. Deposited { amount: 100 }
3. Withdrawn { amount: 30 }
4. Deposited { amount: 50 }

Current balance: 0 + 100 - 30 + 50 = 120</code></pre>
<p><strong>CQRS (Command Query Responsibility Segregation)</strong>: Separate models for reading and writing data. Often combined with event sourcing.</p>
<p><img src="../assets/images/ch4_fig14_cqrs_pattern.svg" class="img-fluid"></p>
<p><strong>Advantages:</strong></p>
<ul>
<li><strong>Loose coupling</strong>: Producers don’t know about consumers</li>
<li><strong>Scalability</strong>: Consumers can be scaled independently</li>
<li><strong>Flexibility</strong>: Easy to add new consumers without changing producers</li>
<li><strong>Responsiveness</strong>: Asynchronous processing improves perceived performance</li>
<li><strong>Audit trail</strong>: Events provide natural logging</li>
<li><strong>Temporal decoupling</strong>: Producers and consumers don’t need to be available simultaneously</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li><strong>Complexity</strong>: Harder to trace the flow of operations</li>
<li><strong>Eventual consistency</strong>: Data may be inconsistent temporarily</li>
<li><strong>Debugging difficulty</strong>: Asynchronous flows are hard to debug</li>
<li><strong>Event ordering</strong>: Ensuring correct order across distributed systems is challenging</li>
<li><strong>Event schema evolution</strong>: Changing event formats requires careful migration</li>
</ul>
<p><strong>When to Use:</strong></p>
<ul>
<li>Systems with many independent components</li>
<li>High-throughput systems with varying load</li>
<li>Systems requiring real-time reactions</li>
<li>Audit and compliance requirements</li>
<li>Complex workflows spanning multiple services</li>
</ul>
</section>
<section id="monolithic-architecture" class="level3" data-number="7.3.5">
<h3 data-number="7.3.5" class="anchored" data-anchor-id="monolithic-architecture"><span class="header-section-number">7.3.5</span> 4.2.5 Monolithic Architecture</h3>
<p>Before moving on, let’s acknowledge the <strong>monolithic architecture</strong>—often presented as the opposite of microservices, but still a valid choice for many systems.</p>
<p>A monolith is a single deployable unit containing all application functionality.</p>
<p><img src="../assets/images/ch4_fig15_monolithic.svg" class="img-fluid"></p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Simple to develop, test, deploy, and scale (initially)</li>
<li>No distributed system complexity</li>
<li>Easy debugging and tracing</li>
<li>ACID transactions across the whole application</li>
<li>Lower operational overhead</li>
</ul>
<p><strong>Disadvantages:</strong></p>
<ul>
<li>Harder to scale specific components</li>
<li>Technology stack is uniform</li>
<li>Large codebase becomes unwieldy</li>
<li>Deployment requires full redeployment</li>
<li>Team coordination becomes challenging as system grows</li>
</ul>
<p><strong>The Modular Monolith:</strong></p>
<p>A middle ground between monolith and microservices. The application is deployed as one unit but internally organized into well-defined, loosely-coupled modules.</p>
<p><img src="../assets/images/ch4_fig16_modular_monolith.svg" class="img-fluid"></p>
<p>Each module:</p>
<ul>
<li>Has a well-defined public API</li>
<li>Keeps implementation details private</li>
<li>Could have its own database schema</li>
<li>Communicates with other modules only through APIs</li>
</ul>
<p>This approach provides many benefits of microservices (modularity, team ownership, clear boundaries) while avoiding distributed system complexity. It’s often a good starting point, with the option to extract modules into microservices later if needed.</p>
</section>
<section id="comparing-architectural-styles" class="level3" data-number="7.3.6">
<h3 data-number="7.3.6" class="anchored" data-anchor-id="comparing-architectural-styles"><span class="header-section-number">7.3.6</span> 4.2.6 Comparing Architectural Styles</h3>
<p><img src="../assets/images/ch4_fig10_architecture_comparison.svg" class="img-fluid"></p>
<hr>
</section>
</section>
<section id="the-solid-principles" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="the-solid-principles"><span class="header-section-number">7.4</span> 4.3 The SOLID Principles</h2>
<p>The <strong>SOLID principles</strong> are five design principles that help developers create software that is easy to maintain, understand, and extend. Introduced by Robert C. Martin (Uncle Bob), these principles apply at the class and module level but inform architectural decisions as well.</p>
<p><img src="../assets/images/ch4_fig5_solid_principles.svg" class="img-fluid"></p>
<section id="single-responsibility-principle-srp" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1" class="anchored" data-anchor-id="single-responsibility-principle-srp"><span class="header-section-number">7.4.1</span> 4.3.1 Single Responsibility Principle (SRP)</h3>
<blockquote class="blockquote">
<p><strong>A class should have one, and only one, reason to change.</strong></p>
</blockquote>
<p>The Single Responsibility Principle states that a class should have only one job. “Reason to change” refers to the actors or stakeholders who might request changes.</p>
<p><strong>Violation Example:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Employee <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Business logic - reason to change: business rules</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculatePay</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Calculate salary, overtime, bonuses</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> salary <span class="op">*</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Persistence - reason to change: database schema</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">save</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Save to database</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        Database<span class="op">.</span><span class="fu">execute</span><span class="op">(</span><span class="st">"INSERT INTO employees..."</span><span class="op">);</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Reporting - reason to change: report format requirements</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">generateReport</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create performance report</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Employee Report: "</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">"..."</span><span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This class has three reasons to change: business rules, database schema changes, and reporting requirements.</p>
<p><strong>Refactored:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Handles employee data and business rules</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Employee <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculatePay</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> salary <span class="op">*</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Getters and setters</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Handles persistence</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> EmployeeRepository <span class="op">{</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">save</span><span class="op">(</span>Employee employee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        Database<span class="op">.</span><span class="fu">execute</span><span class="op">(</span><span class="st">"INSERT INTO employees..."</span><span class="op">);</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> Employee <span class="fu">findById</span><span class="op">(</span><span class="bu">Long</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Load from database</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Handles reporting</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> EmployeeReportGenerator <span class="op">{</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">generateReport</span><span class="op">(</span>Employee employee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Employee Report: "</span> <span class="op">+</span> employee<span class="op">.</span><span class="fu">getName</span><span class="op">()</span> <span class="op">+</span> <span class="st">"..."</span><span class="op">;</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now each class has one reason to change.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Classes are smaller and more focused</li>
<li>Changes are isolated to specific classes</li>
<li>Testing is simplified</li>
<li>Code is easier to understand</li>
</ul>
</section>
<section id="openclosed-principle-ocp" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2" class="anchored" data-anchor-id="openclosed-principle-ocp"><span class="header-section-number">7.4.2</span> 4.3.2 Open/Closed Principle (OCP)</h3>
<blockquote class="blockquote">
<p><strong>Software entities should be open for extension but closed for modification.</strong></p>
</blockquote>
<p>You should be able to add new functionality without changing existing code. This is achieved through abstraction and polymorphism.</p>
<p><strong>Violation Example:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> AreaCalculator <span class="op">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">(</span><span class="bu">Object</span> shape<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>shape <span class="kw">instanceof</span> <span class="bu">Rectangle</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="bu">Rectangle</span> r <span class="op">=</span> <span class="op">(</span><span class="bu">Rectangle</span><span class="op">)</span> shape<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> r<span class="op">.</span><span class="fu">width</span> <span class="op">*</span> r<span class="op">.</span><span class="fu">height</span><span class="op">;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>shape <span class="kw">instanceof</span> Circle<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>            Circle c <span class="op">=</span> <span class="op">(</span>Circle<span class="op">)</span> shape<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">PI</span> <span class="op">*</span> c<span class="op">.</span><span class="fu">radius</span> <span class="op">*</span> c<span class="op">.</span><span class="fu">radius</span><span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Adding a new shape requires modifying this method!</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Every time we add a new shape, we must modify <code>AreaCalculator</code>.</p>
<p><strong>Refactored:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">();</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> <span class="bu">Rectangle</span> <span class="kw">implements</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> width<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> height<span class="op">;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> width <span class="op">*</span> height<span class="op">;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Circle <span class="kw">implements</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> radius<span class="op">;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">PI</span> <span class="op">*</span> radius <span class="op">*</span> radius<span class="op">;</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co">// New shapes can be added without modifying this class</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> AreaCalculator <span class="op">{</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">(</span><span class="bu">Shape</span> shape<span class="op">)</span> <span class="op">{</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> shape<span class="op">.</span><span class="fu">calculateArea</span><span class="op">();</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">// Adding a new shape - no modification to existing code</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Triangle <span class="kw">implements</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> base<span class="op">;</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">double</span> height<span class="op">;</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">calculateArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.5</span> <span class="op">*</span> base <span class="op">*</span> height<span class="op">;</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now we can add new shapes by creating new classes, without modifying existing code.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Reduced risk of breaking existing functionality</li>
<li>New features can be added safely</li>
<li>Promotes use of abstractions</li>
<li>Easier to test new functionality in isolation</li>
</ul>
</section>
<section id="liskov-substitution-principle-lsp" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3" class="anchored" data-anchor-id="liskov-substitution-principle-lsp"><span class="header-section-number">7.4.3</span> 4.3.3 Liskov Substitution Principle (LSP)</h3>
<blockquote class="blockquote">
<p><strong>Objects of a superclass should be replaceable with objects of its subclasses without affecting the correctness of the program.</strong></p>
</blockquote>
<p>Subtypes must be substitutable for their base types. If class B is a subtype of class A, you should be able to use B anywhere you use A without unexpected behavior.</p>
<p><strong>Violation Example:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> <span class="bu">Rectangle</span> <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">int</span> width<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">int</span> height<span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setWidth</span><span class="op">(</span><span class="dt">int</span> width<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">width</span> <span class="op">=</span> width<span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setHeight</span><span class="op">(</span><span class="dt">int</span> height<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">height</span> <span class="op">=</span> height<span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">getArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> width <span class="op">*</span> height<span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Square <span class="kw">extends</span> <span class="bu">Rectangle</span> <span class="op">{</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setWidth</span><span class="op">(</span><span class="dt">int</span> width<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">width</span> <span class="op">=</span> width<span class="op">;</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">height</span> <span class="op">=</span> width<span class="op">;</span>  <span class="co">// Maintain square invariant</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setHeight</span><span class="op">(</span><span class="dt">int</span> height<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">width</span> <span class="op">=</span> height<span class="op">;</span>  <span class="co">// Maintain square invariant</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">height</span> <span class="op">=</span> height<span class="op">;</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This seems logical—a square is a rectangle—but it violates LSP:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">testRectangle</span><span class="op">(</span><span class="bu">Rectangle</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span><span class="fu">setWidth</span><span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span><span class="fu">setHeight</span><span class="op">(</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> r<span class="op">.</span><span class="fu">getArea</span><span class="op">()</span> <span class="op">==</span> <span class="dv">20</span><span class="op">;</span>  <span class="co">// Fails for Square! Area would be 16.</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Code written for <code>Rectangle</code> breaks when given a <code>Square</code>.</p>
<p><strong>Refactored:</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="fu">getArea</span><span class="op">();</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> <span class="bu">Rectangle</span> <span class="kw">implements</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">int</span> width<span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">int</span> height<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Rectangle</span><span class="op">(</span><span class="dt">int</span> width<span class="op">,</span> <span class="dt">int</span> height<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">width</span> <span class="op">=</span> width<span class="op">;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">height</span> <span class="op">=</span> height<span class="op">;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">getArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> width <span class="op">*</span> height<span class="op">;</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Square <span class="kw">implements</span> <span class="bu">Shape</span> <span class="op">{</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">int</span> side<span class="op">;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">Square</span><span class="op">(</span><span class="dt">int</span> side<span class="op">)</span> <span class="op">{</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">side</span> <span class="op">=</span> side<span class="op">;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">int</span> <span class="fu">getArea</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> side <span class="op">*</span> side<span class="op">;</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now Square and Rectangle don’t have an inheritance relationship that creates behavioral conflicts.</p>
<p><strong>Signs of LSP Violations:</strong></p>
<ul>
<li>Subclasses that throw UnsupportedOperationException</li>
<li>Subclasses that override methods to do nothing</li>
<li>Type checking with instanceof before calling methods</li>
<li>Unexpected behavior when substituting subtypes</li>
</ul>
</section>
<section id="interface-segregation-principle-isp" class="level3" data-number="7.4.4">
<h3 data-number="7.4.4" class="anchored" data-anchor-id="interface-segregation-principle-isp"><span class="header-section-number">7.4.4</span> 4.3.4 Interface Segregation Principle (ISP)</h3>
<blockquote class="blockquote">
<p><strong>Clients should not be forced to depend on interfaces they do not use.</strong></p>
</blockquote>
<p>Large interfaces should be split into smaller, more specific ones so that clients only need to know about methods relevant to them.</p>
<p><strong>Violation Example:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Worker <span class="op">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">work</span><span class="op">();</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">eat</span><span class="op">();</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">sleep</span><span class="op">();</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> HumanWorker <span class="kw">implements</span> Worker <span class="op">{</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">work</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">eat</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">sleep</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> RobotWorker <span class="kw">implements</span> Worker <span class="op">{</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">work</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">eat</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">UnsupportedOperationException</span><span class="op">(</span><span class="st">"Robots don't eat"</span><span class="op">);</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">sleep</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">UnsupportedOperationException</span><span class="op">(</span><span class="st">"Robots don't sleep"</span><span class="op">);</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>RobotWorker</code> is forced to implement methods it doesn’t use.</p>
<p><strong>Refactored:</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Workable <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">work</span><span class="op">();</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Eatable <span class="op">{</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">eat</span><span class="op">();</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Sleepable <span class="op">{</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">sleep</span><span class="op">();</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> HumanWorker <span class="kw">implements</span> Workable<span class="op">,</span> Eatable<span class="op">,</span> Sleepable <span class="op">{</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">work</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">eat</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">sleep</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> RobotWorker <span class="kw">implements</span> Workable <span class="op">{</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">work</span><span class="op">()</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now each class implements only the interfaces it needs.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Classes aren’t forced to implement unused methods</li>
<li>Interfaces are more cohesive</li>
<li>Changes to one interface don’t affect unrelated clients</li>
<li>Easier to understand what a class does</li>
</ul>
</section>
<section id="dependency-inversion-principle-dip" class="level3" data-number="7.4.5">
<h3 data-number="7.4.5" class="anchored" data-anchor-id="dependency-inversion-principle-dip"><span class="header-section-number">7.4.5</span> 4.3.5 Dependency Inversion Principle (DIP)</h3>
<blockquote class="blockquote">
<p><strong>High-level modules should not depend on low-level modules. Both should depend on abstractions. Abstractions should not depend on details. Details should depend on abstractions.</strong></p>
</blockquote>
<p>This principle is about decoupling. High-level business logic should not directly depend on low-level implementation details like databases or file systems.</p>
<p><strong>Violation Example:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MySQLDatabase <span class="op">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">save</span><span class="op">(</span><span class="bu">String</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Save to MySQL</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> UserService <span class="op">{</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> MySQLDatabase database<span class="op">;</span>  <span class="co">// Direct dependency on implementation</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">UserService</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">database</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">MySQLDatabase</span><span class="op">();</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">createUser</span><span class="op">(</span><span class="bu">String</span> userData<span class="op">)</span> <span class="op">{</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Business logic</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        database<span class="op">.</span><span class="fu">save</span><span class="op">(</span>userData<span class="op">);</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>UserService</code> (high-level) directly depends on <code>MySQLDatabase</code> (low-level). Changing databases requires modifying <code>UserService</code>.</p>
<p><strong>Refactored:</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Abstraction</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Database <span class="op">{</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">save</span><span class="op">(</span><span class="bu">String</span> data<span class="op">);</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Low-level implementation depends on abstraction</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MySQLDatabase <span class="kw">implements</span> Database <span class="op">{</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">save</span><span class="op">(</span><span class="bu">String</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Save to MySQL</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MongoDatabase <span class="kw">implements</span> Database <span class="op">{</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">save</span><span class="op">(</span><span class="bu">String</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Save to MongoDB</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">// High-level module depends on abstraction</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> UserService <span class="op">{</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Database database<span class="op">;</span>  <span class="co">// Depends on interface, not implementation</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">UserService</span><span class="op">(</span>Database database<span class="op">)</span> <span class="op">{</span>  <span class="co">// Dependency injection</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">database</span> <span class="op">=</span> database<span class="op">;</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">createUser</span><span class="op">(</span><span class="bu">String</span> userData<span class="op">)</span> <span class="op">{</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Business logic</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>        database<span class="op">.</span><span class="fu">save</span><span class="op">(</span>userData<span class="op">);</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now both high-level (<code>UserService</code>) and low-level (<code>MySQLDatabase</code>) depend on the abstraction (<code>Database</code>).</p>
<p><strong>Dependency Injection:</strong></p>
<p>DIP is often implemented through <strong>dependency injection</strong>, where dependencies are provided to a class rather than created by it:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Constructor injection</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>UserService service <span class="op">=</span> <span class="kw">new</span> <span class="fu">UserService</span><span class="op">(</span><span class="kw">new</span> <span class="fu">MySQLDatabase</span><span class="op">());</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Or for testing</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>UserService testService <span class="op">=</span> <span class="kw">new</span> <span class="fu">UserService</span><span class="op">(</span><span class="kw">new</span> <span class="fu">MockDatabase</span><span class="op">());</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Benefits:</strong></p>
<ul>
<li>Loose coupling between components</li>
<li>Easier testing (inject mocks)</li>
<li>Flexibility to change implementations</li>
<li>High-level modules are insulated from low-level changes</li>
</ul>
</section>
<section id="solid-summary" class="level3" data-number="7.4.6">
<h3 data-number="7.4.6" class="anchored" data-anchor-id="solid-summary"><span class="header-section-number">7.4.6</span> 4.3.6 SOLID Summary</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Principle</th>
<th>Focus</th>
<th>Key Benefit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>S</strong>ingle Responsibility</td>
<td>One reason to change</td>
<td>Maintainability</td>
</tr>
<tr class="even">
<td><strong>O</strong>pen/Closed</td>
<td>Open for extension, closed for modification</td>
<td>Extensibility</td>
</tr>
<tr class="odd">
<td><strong>L</strong>iskov Substitution</td>
<td>Subtypes are substitutable</td>
<td>Correctness</td>
</tr>
<tr class="even">
<td><strong>I</strong>nterface Segregation</td>
<td>Small, specific interfaces</td>
<td>Flexibility</td>
</tr>
<tr class="odd">
<td><strong>D</strong>ependency Inversion</td>
<td>Depend on abstractions</td>
<td>Loose coupling</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="design-patterns" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="design-patterns"><span class="header-section-number">7.5</span> 4.4 Design Patterns</h2>
<p><strong>Design patterns</strong> are reusable solutions to common problems in software design. They’re not code you can copy directly but templates for solving problems that can be adapted to many situations.</p>
<p>The seminal book “Design Patterns: Elements of Reusable Object-Oriented Software” by the Gang of Four (GoF) Gamma, Helm, Johnson, and Vlissides—cataloged 23 patterns in three categories: Creational, Structural, and Behavioral.</p>
<p><img src="../assets/images/ch4_fig6_design_patterns_overview.svg" class="img-fluid"></p>
<section id="creational-patterns" class="level3" data-number="7.5.1">
<h3 data-number="7.5.1" class="anchored" data-anchor-id="creational-patterns"><span class="header-section-number">7.5.1</span> 4.4.1 Creational Patterns</h3>
<p>Creational patterns deal with object creation mechanisms, trying to create objects in a manner suitable to the situation.</p>
<section id="singleton-pattern" class="level4" data-number="7.5.1.1">
<h4 data-number="7.5.1.1" class="anchored" data-anchor-id="singleton-pattern"><span class="header-section-number">7.5.1.1</span> Singleton Pattern</h4>
<p><strong>Intent</strong>: Ensure a class has only one instance and provide a global point of access to it.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>Exactly one instance is needed (database connection pool, configuration manager)</li>
<li>Controlled access to a shared resource</li>
<li>Global state that needs to be consistent</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig17_singleton_structure.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> DatabaseConnection <span class="op">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> DatabaseConnection instance<span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Connection</span> connection<span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Private constructor prevents direct instantiation</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="fu">DatabaseConnection</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">connection</span> <span class="op">=</span> <span class="fu">createConnection</span><span class="op">();</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Thread-safe lazy initialization</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="kw">synchronized</span> DatabaseConnection <span class="fu">getInstance</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>instance <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>            instance <span class="op">=</span> <span class="kw">new</span> <span class="fu">DatabaseConnection</span><span class="op">();</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> instance<span class="op">;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">query</span><span class="op">(</span><span class="bu">String</span> sql<span class="op">)</span> <span class="op">{</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Execute query using connection</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Connection</span> <span class="fu">createConnection</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create database connection</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>DatabaseConnection db <span class="op">=</span> DatabaseConnection<span class="op">.</span><span class="fu">getInstance</span><span class="op">();</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">query</span><span class="op">(</span><span class="st">"SELECT * FROM users"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Cautions:</strong></p>
<ul>
<li>Singletons introduce global state, which can make testing difficult</li>
<li>They can hide dependencies (classes use the singleton without it being in their interface)</li>
<li>Consider dependency injection instead in many cases</li>
</ul>
</section>
<section id="factory-method-pattern" class="level4" data-number="7.5.1.2">
<h4 data-number="7.5.1.2" class="anchored" data-anchor-id="factory-method-pattern"><span class="header-section-number">7.5.1.2</span> Factory Method Pattern</h4>
<p><strong>Intent</strong>: Define an interface for creating an object, but let subclasses decide which class to instantiate.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>A class can’t anticipate the class of objects it must create</li>
<li>A class wants its subclasses to specify the objects it creates</li>
<li>You want to localize the logic of which class to instantiate</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig8_factory_pattern.svg" class="img-fluid"></p>
<p><img src="../assets/images/ch4_fig18_factory_hierarchy.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Product interface</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> <span class="bu">Notification</span> <span class="op">{</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">send</span><span class="op">(</span><span class="bu">String</span> message<span class="op">);</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete products</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> EmailNotification <span class="kw">implements</span> <span class="bu">Notification</span> <span class="op">{</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">send</span><span class="op">(</span><span class="bu">String</span> message<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Sending email: "</span> <span class="op">+</span> message<span class="op">);</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SMSNotification <span class="kw">implements</span> <span class="bu">Notification</span> <span class="op">{</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">send</span><span class="op">(</span><span class="bu">String</span> message<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Sending SMS: "</span> <span class="op">+</span> message<span class="op">);</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> PushNotification <span class="kw">implements</span> <span class="bu">Notification</span> <span class="op">{</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">send</span><span class="op">(</span><span class="bu">String</span> message<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Sending push notification: "</span> <span class="op">+</span> message<span class="op">);</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co">// Creator with factory method</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> NotificationFactory <span class="op">{</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">Notification</span> <span class="fu">createNotification</span><span class="op">(</span><span class="bu">String</span> type<span class="op">)</span> <span class="op">{</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>type<span class="op">.</span><span class="fu">toLowerCase</span><span class="op">())</span> <span class="op">{</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="st">"email"</span><span class="op">:</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="kw">new</span> <span class="fu">EmailNotification</span><span class="op">();</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="st">"sms"</span><span class="op">:</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="kw">new</span> <span class="fu">SMSNotification</span><span class="op">();</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="st">"push"</span><span class="op">:</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> <span class="kw">new</span> <span class="fu">PushNotification</span><span class="op">();</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>            <span class="kw">default</span><span class="op">:</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>                <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalArgumentException</span><span class="op">(</span><span class="st">"Unknown type: "</span> <span class="op">+</span> type<span class="op">);</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>NotificationFactory factory <span class="op">=</span> <span class="kw">new</span> <span class="fu">NotificationFactory</span><span class="op">();</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="bu">Notification</span> notification <span class="op">=</span> factory<span class="op">.</span><span class="fu">createNotification</span><span class="op">(</span><span class="st">"email"</span><span class="op">);</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>notification<span class="op">.</span><span class="fu">send</span><span class="op">(</span><span class="st">"Hello, World!"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="builder-pattern" class="level4" data-number="7.5.1.3">
<h4 data-number="7.5.1.3" class="anchored" data-anchor-id="builder-pattern"><span class="header-section-number">7.5.1.3</span> Builder Pattern</h4>
<p><strong>Intent</strong>: Separate the construction of a complex object from its representation, allowing the same construction process to create different representations.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>Object construction requires many parameters</li>
<li>Some parameters are optional</li>
<li>Object creation involves multiple steps</li>
<li>Constructors with many parameters are confusing</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig19_builder_pattern.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> User <span class="op">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> firstName<span class="op">;</span>     <span class="co">// Required</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> lastName<span class="op">;</span>      <span class="co">// Required</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> email<span class="op">;</span>         <span class="co">// Required</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> phone<span class="op">;</span>         <span class="co">// Optional</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> address<span class="op">;</span>       <span class="co">// Optional</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">final</span> <span class="dt">int</span> age<span class="op">;</span>              <span class="co">// Optional</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="fu">User</span><span class="op">(</span>UserBuilder builder<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">firstName</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">firstName</span><span class="op">;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">lastName</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">lastName</span><span class="op">;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">email</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">email</span><span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">phone</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">phone</span><span class="op">;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">address</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">address</span><span class="op">;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">age</span> <span class="op">=</span> builder<span class="op">.</span><span class="fu">age</span><span class="op">;</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Getters...</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> UserBuilder <span class="op">{</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> firstName<span class="op">;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> lastName<span class="op">;</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="dt">final</span> <span class="bu">String</span> email<span class="op">;</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="bu">String</span> phone<span class="op">;</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="bu">String</span> address<span class="op">;</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>        <span class="kw">private</span> <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> <span class="fu">UserBuilder</span><span class="op">(</span><span class="bu">String</span> firstName<span class="op">,</span> <span class="bu">String</span> lastName<span class="op">,</span> <span class="bu">String</span> email<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">firstName</span> <span class="op">=</span> firstName<span class="op">;</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">lastName</span> <span class="op">=</span> lastName<span class="op">;</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">email</span> <span class="op">=</span> email<span class="op">;</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> UserBuilder <span class="fu">phone</span><span class="op">(</span><span class="bu">String</span> phone<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">phone</span> <span class="op">=</span> phone<span class="op">;</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> UserBuilder <span class="fu">address</span><span class="op">(</span><span class="bu">String</span> address<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">address</span> <span class="op">=</span> address<span class="op">;</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> UserBuilder <span class="fu">age</span><span class="op">(</span><span class="dt">int</span> age<span class="op">)</span> <span class="op">{</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">age</span> <span class="op">=</span> age<span class="op">;</span></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">this</span><span class="op">;</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>        <span class="kw">public</span> User <span class="fu">build</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="kw">new</span> <span class="fu">User</span><span class="op">(</span><span class="kw">this</span><span class="op">);</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage - fluent interface</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>User user <span class="op">=</span> <span class="kw">new</span> User<span class="op">.</span><span class="fu">UserBuilder</span><span class="op">(</span><span class="st">"John"</span><span class="op">,</span> <span class="st">"Doe"</span><span class="op">,</span> <span class="st">"john@example.com"</span><span class="op">)</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">phone</span><span class="op">(</span><span class="st">"555-1234"</span><span class="op">)</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">age</span><span class="op">(</span><span class="dv">30</span><span class="op">)</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="structural-patterns" class="level3" data-number="7.5.2">
<h3 data-number="7.5.2" class="anchored" data-anchor-id="structural-patterns"><span class="header-section-number">7.5.2</span> 4.4.2 Structural Patterns</h3>
<p>Structural patterns deal with object composition—how classes and objects are combined to form larger structures.</p>
<section id="adapter-pattern" class="level4" data-number="7.5.2.1">
<h4 data-number="7.5.2.1" class="anchored" data-anchor-id="adapter-pattern"><span class="header-section-number">7.5.2.1</span> Adapter Pattern</h4>
<p><strong>Intent</strong>: Convert the interface of a class into another interface clients expect. Adapter lets classes work together that couldn’t otherwise because of incompatible interfaces.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>You want to use an existing class with an incompatible interface</li>
<li>You’re integrating with third-party code you can’t modify</li>
<li>You need to create a reusable class that cooperates with unrelated classes</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig20_adapter_structure.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Existing interface our code uses</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> MediaPlayer <span class="op">{</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">play</span><span class="op">(</span><span class="bu">String</span> filename<span class="op">);</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Existing class with incompatible interface (third-party library)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> AdvancedVideoPlayer <span class="op">{</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">playMp4</span><span class="op">(</span><span class="bu">String</span> filename<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Playing MP4: "</span> <span class="op">+</span> filename<span class="op">);</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">playVlc</span><span class="op">(</span><span class="bu">String</span> filename<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Playing VLC: "</span> <span class="op">+</span> filename<span class="op">);</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Adapter makes AdvancedVideoPlayer compatible with MediaPlayer</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> VideoPlayerAdapter <span class="kw">implements</span> MediaPlayer <span class="op">{</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> AdvancedVideoPlayer advancedPlayer<span class="op">;</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">VideoPlayerAdapter</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">advancedPlayer</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">AdvancedVideoPlayer</span><span class="op">();</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">play</span><span class="op">(</span><span class="bu">String</span> filename<span class="op">)</span> <span class="op">{</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>filename<span class="op">.</span><span class="fu">endsWith</span><span class="op">(</span><span class="st">".mp4"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>            advancedPlayer<span class="op">.</span><span class="fu">playMp4</span><span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>filename<span class="op">.</span><span class="fu">endsWith</span><span class="op">(</span><span class="st">".vlc"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>            advancedPlayer<span class="op">.</span><span class="fu">playVlc</span><span class="op">(</span>filename<span class="op">);</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">UnsupportedOperationException</span><span class="op">(</span><span class="st">"Format not supported"</span><span class="op">);</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>MediaPlayer player <span class="op">=</span> <span class="kw">new</span> <span class="fu">VideoPlayerAdapter</span><span class="op">();</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>player<span class="op">.</span><span class="fu">play</span><span class="op">(</span><span class="st">"movie.mp4"</span><span class="op">);</span>  <span class="co">// Works through adapter</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="decorator-pattern" class="level4" data-number="7.5.2.2">
<h4 data-number="7.5.2.2" class="anchored" data-anchor-id="decorator-pattern"><span class="header-section-number">7.5.2.2</span> Decorator Pattern</h4>
<p><strong>Intent</strong>: Attach additional responsibilities to an object dynamically. Decorators provide a flexible alternative to subclassing for extending functionality.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>Add responsibilities to individual objects without affecting other objects</li>
<li>Responsibilities can be withdrawn</li>
<li>Extension by subclassing is impractical or impossible</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig21_decorator_structure.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Component interface</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Coffee <span class="op">{</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">();</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="fu">getCost</span><span class="op">();</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete component</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SimpleCoffee <span class="kw">implements</span> Coffee <span class="op">{</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Simple Coffee"</span><span class="op">;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">getCost</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">2.00</span><span class="op">;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co">// Base decorator</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">abstract</span> <span class="kw">class</span> CoffeeDecorator <span class="kw">implements</span> Coffee <span class="op">{</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> Coffee coffee<span class="op">;</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">CoffeeDecorator</span><span class="op">(</span>Coffee coffee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">coffee</span> <span class="op">=</span> coffee<span class="op">;</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getDescription</span><span class="op">();</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">getCost</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getCost</span><span class="op">();</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete decorators</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MilkDecorator <span class="kw">extends</span> CoffeeDecorator <span class="op">{</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">MilkDecorator</span><span class="op">(</span>Coffee coffee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">(</span>coffee<span class="op">);</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getDescription</span><span class="op">()</span> <span class="op">+</span> <span class="st">", Milk"</span><span class="op">;</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">getCost</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getCost</span><span class="op">()</span> <span class="op">+</span> <span class="fl">0.50</span><span class="op">;</span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> SugarDecorator <span class="kw">extends</span> CoffeeDecorator <span class="op">{</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">SugarDecorator</span><span class="op">(</span>Coffee coffee<span class="op">)</span> <span class="op">{</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">super</span><span class="op">(</span>coffee<span class="op">);</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDescription</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getDescription</span><span class="op">()</span> <span class="op">+</span> <span class="st">", Sugar"</span><span class="op">;</span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">getCost</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> coffee<span class="op">.</span><span class="fu">getCost</span><span class="op">()</span> <span class="op">+</span> <span class="fl">0.25</span><span class="op">;</span></span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage - decorators can be stacked</span></span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>Coffee coffee <span class="op">=</span> <span class="kw">new</span> <span class="fu">SimpleCoffee</span><span class="op">();</span></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>coffee <span class="op">=</span> <span class="kw">new</span> <span class="fu">MilkDecorator</span><span class="op">(</span>coffee<span class="op">);</span></span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>coffee <span class="op">=</span> <span class="kw">new</span> <span class="fu">SugarDecorator</span><span class="op">(</span>coffee<span class="op">);</span></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>coffee<span class="op">.</span><span class="fu">getDescription</span><span class="op">());</span>  <span class="co">// Simple Coffee, Milk, Sugar</span></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>coffee<span class="op">.</span><span class="fu">getCost</span><span class="op">());</span>         <span class="co">// 2.75</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="facade-pattern" class="level4" data-number="7.5.2.3">
<h4 data-number="7.5.2.3" class="anchored" data-anchor-id="facade-pattern"><span class="header-section-number">7.5.2.3</span> Facade Pattern</h4>
<p><strong>Intent</strong>: Provide a unified interface to a set of interfaces in a subsystem. Facade defines a higher-level interface that makes the subsystem easier to use.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>You want to provide a simple interface to a complex subsystem</li>
<li>There are many dependencies between clients and implementation classes</li>
<li>You want to layer your subsystems</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig22_facade_structure.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Complex subsystem classes</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> CPU <span class="op">{</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">freeze</span><span class="op">()</span> <span class="op">{</span> <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"CPU: Freezing"</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">jump</span><span class="op">(</span><span class="dt">long</span> position<span class="op">)</span> <span class="op">{</span> <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"CPU: Jumping to "</span> <span class="op">+</span> position<span class="op">);</span> <span class="op">}</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">execute</span><span class="op">()</span> <span class="op">{</span> <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"CPU: Executing"</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Memory <span class="op">{</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">load</span><span class="op">(</span><span class="dt">long</span> position<span class="op">,</span> <span class="dt">byte</span><span class="op">[]</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Memory: Loading data at "</span> <span class="op">+</span> position<span class="op">);</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> HardDrive <span class="op">{</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">byte</span><span class="op">[]</span> <span class="fu">read</span><span class="op">(</span><span class="dt">long</span> lba<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"HardDrive: Reading "</span> <span class="op">+</span> size <span class="op">+</span> <span class="st">" bytes from "</span> <span class="op">+</span> lba<span class="op">);</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="dt">byte</span><span class="op">[</span>size<span class="op">];</span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="co">// Facade provides simple interface</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ComputerFacade <span class="op">{</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> CPU cpu<span class="op">;</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Memory memory<span class="op">;</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> HardDrive hardDrive<span class="op">;</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">long</span> BOOT_ADDRESS <span class="op">=</span> <span class="bn">0x0000</span><span class="op">;</span></span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">long</span> BOOT_SECTOR <span class="op">=</span> <span class="bn">0x001</span><span class="op">;</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="dt">final</span> <span class="dt">int</span> SECTOR_SIZE <span class="op">=</span> <span class="dv">512</span><span class="op">;</span></span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">ComputerFacade</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">cpu</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">CPU</span><span class="op">();</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">memory</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Memory</span><span class="op">();</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">hardDrive</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">HardDrive</span><span class="op">();</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Simple interface hiding complex boot sequence</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">start</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>        cpu<span class="op">.</span><span class="fu">freeze</span><span class="op">();</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>        <span class="dt">byte</span><span class="op">[]</span> bootData <span class="op">=</span> hardDrive<span class="op">.</span><span class="fu">read</span><span class="op">(</span>BOOT_SECTOR<span class="op">,</span> SECTOR_SIZE<span class="op">);</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>        memory<span class="op">.</span><span class="fu">load</span><span class="op">(</span>BOOT_ADDRESS<span class="op">,</span> bootData<span class="op">);</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>        cpu<span class="op">.</span><span class="fu">jump</span><span class="op">(</span>BOOT_ADDRESS<span class="op">);</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>        cpu<span class="op">.</span><span class="fu">execute</span><span class="op">();</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Computer started successfully!"</span><span class="op">);</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage - client only needs to know about facade</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>ComputerFacade computer <span class="op">=</span> <span class="kw">new</span> <span class="fu">ComputerFacade</span><span class="op">();</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>computer<span class="op">.</span><span class="fu">start</span><span class="op">();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="behavioral-patterns" class="level3" data-number="7.5.3">
<h3 data-number="7.5.3" class="anchored" data-anchor-id="behavioral-patterns"><span class="header-section-number">7.5.3</span> 4.4.3 Behavioral Patterns</h3>
<p>Behavioral patterns deal with communication between objects—how objects interact and distribute responsibility.</p>
<section id="strategy-pattern" class="level4" data-number="7.5.3.1">
<h4 data-number="7.5.3.1" class="anchored" data-anchor-id="strategy-pattern"><span class="header-section-number">7.5.3.1</span> Strategy Pattern</h4>
<p><strong>Intent</strong>: Define a family of algorithms, encapsulate each one, and make them interchangeable. Strategy lets the algorithm vary independently from clients that use it.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>Many related classes differ only in their behavior</li>
<li>You need different variants of an algorithm</li>
<li>An algorithm uses data that clients shouldn’t know about</li>
<li>A class defines many behaviors as conditional statements</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig7_strategy_pattern.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Strategy interface</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> PaymentStrategy <span class="op">{</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">pay</span><span class="op">(</span><span class="dt">double</span> amount<span class="op">);</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete strategies</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> CreditCardPayment <span class="kw">implements</span> PaymentStrategy <span class="op">{</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> cardNumber<span class="op">;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> cvv<span class="op">;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">CreditCardPayment</span><span class="op">(</span><span class="bu">String</span> cardNumber<span class="op">,</span> <span class="bu">String</span> cvv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">cardNumber</span> <span class="op">=</span> cardNumber<span class="op">;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">cvv</span> <span class="op">=</span> cvv<span class="op">;</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">pay</span><span class="op">(</span><span class="dt">double</span> amount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Paid $"</span> <span class="op">+</span> amount <span class="op">+</span> <span class="st">" with credit card "</span> <span class="op">+</span> </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>            cardNumber<span class="op">.</span><span class="fu">substring</span><span class="op">(</span>cardNumber<span class="op">.</span><span class="fu">length</span><span class="op">()</span> <span class="op">-</span> <span class="dv">4</span><span class="op">));</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> PayPalPayment <span class="kw">implements</span> PaymentStrategy <span class="op">{</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> email<span class="op">;</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">PayPalPayment</span><span class="op">(</span><span class="bu">String</span> email<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">email</span> <span class="op">=</span> email<span class="op">;</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">pay</span><span class="op">(</span><span class="dt">double</span> amount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Paid $"</span> <span class="op">+</span> amount <span class="op">+</span> <span class="st">" via PayPal ("</span> <span class="op">+</span> email <span class="op">+</span> <span class="st">")"</span><span class="op">);</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> CryptoPayment <span class="kw">implements</span> PaymentStrategy <span class="op">{</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> walletAddress<span class="op">;</span></span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">CryptoPayment</span><span class="op">(</span><span class="bu">String</span> walletAddress<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">walletAddress</span> <span class="op">=</span> walletAddress<span class="op">;</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">pay</span><span class="op">(</span><span class="dt">double</span> amount<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Paid $"</span> <span class="op">+</span> amount <span class="op">+</span> <span class="st">" in crypto to "</span> <span class="op">+</span> </span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>            walletAddress<span class="op">.</span><span class="fu">substring</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">8</span><span class="op">)</span> <span class="op">+</span> <span class="st">"..."</span><span class="op">);</span></span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a><span class="co">// Context</span></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> ShoppingCart <span class="op">{</span></span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">List</span><span class="op">&lt;</span>Item<span class="op">&gt;</span> items <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> PaymentStrategy paymentStrategy<span class="op">;</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">addItem</span><span class="op">(</span>Item item<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a>        items<span class="op">.</span><span class="fu">add</span><span class="op">(</span>item<span class="op">);</span></span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setPaymentStrategy</span><span class="op">(</span>PaymentStrategy strategy<span class="op">)</span> <span class="op">{</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">paymentStrategy</span> <span class="op">=</span> strategy<span class="op">;</span></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">checkout</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> total <span class="op">=</span> items<span class="op">.</span><span class="fu">stream</span><span class="op">()</span></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">mapToDouble</span><span class="op">(</span>Item<span class="op">::</span>getPrice<span class="op">)</span></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">sum</span><span class="op">();</span></span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a>        paymentStrategy<span class="op">.</span><span class="fu">pay</span><span class="op">(</span>total<span class="op">);</span></span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage - switch strategies at runtime</span></span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a>ShoppingCart cart <span class="op">=</span> <span class="kw">new</span> <span class="fu">ShoppingCart</span><span class="op">();</span></span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">addItem</span><span class="op">(</span><span class="kw">new</span> <span class="fu">Item</span><span class="op">(</span><span class="st">"Book"</span><span class="op">,</span> <span class="fl">29.99</span><span class="op">));</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">addItem</span><span class="op">(</span><span class="kw">new</span> <span class="fu">Item</span><span class="op">(</span><span class="st">"Pen"</span><span class="op">,</span> <span class="fl">4.99</span><span class="op">));</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">setPaymentStrategy</span><span class="op">(</span><span class="kw">new</span> <span class="fu">CreditCardPayment</span><span class="op">(</span><span class="st">"4111111111111111"</span><span class="op">,</span> <span class="st">"123"</span><span class="op">));</span></span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">checkout</span><span class="op">();</span>  <span class="co">// Paid $34.98 with credit card 1111</span></span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">setPaymentStrategy</span><span class="op">(</span><span class="kw">new</span> <span class="fu">PayPalPayment</span><span class="op">(</span><span class="st">"user@email.com"</span><span class="op">));</span></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a>cart<span class="op">.</span><span class="fu">checkout</span><span class="op">();</span>  <span class="co">// Paid $34.98 via PayPal (user@email.com)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="observer-pattern" class="level4" data-number="7.5.3.2">
<h4 data-number="7.5.3.2" class="anchored" data-anchor-id="observer-pattern"><span class="header-section-number">7.5.3.2</span> Observer Pattern</h4>
<p><strong>Intent</strong>: Define a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>Changes to one object require changing others, and you don’t know how many objects need to change</li>
<li>An object should notify other objects without knowing who they are</li>
<li>You need to implement event handling systems</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig9_observer_pattern.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Observer interface</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> <span class="bu">Observer</span> <span class="op">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">update</span><span class="op">(</span><span class="bu">String</span> message<span class="op">);</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Subject interface</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> <span class="bu">Subject</span> <span class="op">{</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">attach</span><span class="op">(</span><span class="bu">Observer</span> observer<span class="op">);</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">detach</span><span class="op">(</span><span class="bu">Observer</span> observer<span class="op">);</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">notifyObservers</span><span class="op">();</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete Subject</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> NewsAgency <span class="kw">implements</span> <span class="bu">Subject</span> <span class="op">{</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> news<span class="op">;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">List</span><span class="op">&lt;</span><span class="bu">Observer</span><span class="op">&gt;</span> observers <span class="op">=</span> <span class="kw">new</span> <span class="bu">ArrayList</span><span class="op">&lt;&gt;();</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">attach</span><span class="op">(</span><span class="bu">Observer</span> observer<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>        observers<span class="op">.</span><span class="fu">add</span><span class="op">(</span>observer<span class="op">);</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">detach</span><span class="op">(</span><span class="bu">Observer</span> observer<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        observers<span class="op">.</span><span class="fu">remove</span><span class="op">(</span>observer<span class="op">);</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">notifyObservers</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="bu">Observer</span> observer <span class="op">:</span> observers<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>            observer<span class="op">.</span><span class="fu">update</span><span class="op">(</span>news<span class="op">);</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setNews</span><span class="op">(</span><span class="bu">String</span> news<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">news</span> <span class="op">=</span> news<span class="op">;</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>        <span class="fu">notifyObservers</span><span class="op">();</span></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete Observers</span></span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> NewsChannel <span class="kw">implements</span> <span class="bu">Observer</span> <span class="op">{</span></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">NewsChannel</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">name</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">update</span><span class="op">(</span><span class="bu">String</span> news<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span>name <span class="op">+</span> <span class="st">" received news: "</span> <span class="op">+</span> news<span class="op">);</span></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MobileApp <span class="kw">implements</span> <span class="bu">Observer</span> <span class="op">{</span></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">update</span><span class="op">(</span><span class="bu">String</span> news<span class="op">)</span> <span class="op">{</span></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Mobile notification: "</span> <span class="op">+</span> news<span class="op">);</span></span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage</span></span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a>NewsAgency agency <span class="op">=</span> <span class="kw">new</span> <span class="fu">NewsAgency</span><span class="op">();</span></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>NewsChannel cnn <span class="op">=</span> <span class="kw">new</span> <span class="fu">NewsChannel</span><span class="op">(</span><span class="st">"CNN"</span><span class="op">);</span></span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a>NewsChannel bbc <span class="op">=</span> <span class="kw">new</span> <span class="fu">NewsChannel</span><span class="op">(</span><span class="st">"BBC"</span><span class="op">);</span></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>MobileApp app <span class="op">=</span> <span class="kw">new</span> <span class="fu">MobileApp</span><span class="op">();</span></span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">attach</span><span class="op">(</span>cnn<span class="op">);</span></span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">attach</span><span class="op">(</span>bbc<span class="op">);</span></span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">attach</span><span class="op">(</span>app<span class="op">);</span></span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">setNews</span><span class="op">(</span><span class="st">"Breaking: New discovery on Mars!"</span><span class="op">);</span></span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a><span class="co">// Output:</span></span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a><span class="co">// CNN received news: Breaking: New discovery on Mars!</span></span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true" tabindex="-1"></a><span class="co">// BBC received news: Breaking: New discovery on Mars!</span></span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true" tabindex="-1"></a><span class="co">// Mobile notification: Breaking: New discovery on Mars!</span></span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">detach</span><span class="op">(</span>bbc<span class="op">);</span></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a>agency<span class="op">.</span><span class="fu">setNews</span><span class="op">(</span><span class="st">"Update: Weather forecast changed"</span><span class="op">);</span></span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a><span class="co">// Output:</span></span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a><span class="co">// CNN received news: Update: Weather forecast changed</span></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a><span class="co">// Mobile notification: Update: Weather forecast changed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="template-method-pattern" class="level4" data-number="7.5.3.3">
<h4 data-number="7.5.3.3" class="anchored" data-anchor-id="template-method-pattern"><span class="header-section-number">7.5.3.3</span> Template Method Pattern</h4>
<p><strong>Intent</strong>: Define the skeleton of an algorithm in an operation, deferring some steps to subclasses. Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithm’s structure.</p>
<p><strong>When to Use:</strong></p>
<ul>
<li>You want to implement the invariant parts of an algorithm once and leave variable parts to subclasses</li>
<li>You want to control subclass extensions</li>
<li>Common behavior among subclasses should be factored and localized in a common class</li>
</ul>
<p><strong>Structure:</strong></p>
<p><img src="../assets/images/ch4_fig23_template_method.svg" class="img-fluid"></p>
<p><strong>Implementation:</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Abstract class with template method</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">abstract</span> <span class="kw">class</span> DataProcessor <span class="op">{</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Template method - defines the algorithm skeleton</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">final</span> <span class="dt">void</span> <span class="fu">process</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">readData</span><span class="op">();</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">processData</span><span class="op">();</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">writeData</span><span class="op">();</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cleanup</span><span class="op">();</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Common step - same for all subclasses</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">readData</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Reading data from source..."</span><span class="op">);</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Abstract steps - must be implemented by subclasses</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">abstract</span> <span class="dt">void</span> <span class="fu">processData</span><span class="op">();</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="kw">abstract</span> <span class="dt">void</span> <span class="fu">writeData</span><span class="op">();</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Hook method - optional override, has default implementation</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">cleanup</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Standard cleanup..."</span><span class="op">);</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete implementation for CSV</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> CSVProcessor <span class="kw">extends</span> DataProcessor <span class="op">{</span></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">processData</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Parsing CSV data, validating fields..."</span><span class="op">);</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">writeData</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Writing to CSV output file..."</span><span class="op">);</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a><span class="co">// Concrete implementation for JSON</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> JSONProcessor <span class="kw">extends</span> DataProcessor <span class="op">{</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">processData</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Parsing JSON objects, transforming structure..."</span><span class="op">);</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">writeData</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Writing to JSON output file..."</span><span class="op">);</span></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Override</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">cleanup</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Closing JSON streams and freeing memory..."</span><span class="op">);</span></span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a><span class="co">// Usage</span></span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>DataProcessor csvProcessor <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSVProcessor</span><span class="op">();</span></span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>csvProcessor<span class="op">.</span><span class="fu">process</span><span class="op">();</span></span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a><span class="co">// Reading data from source...</span></span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a><span class="co">// Parsing CSV data, validating fields...</span></span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a><span class="co">// Writing to CSV output file...</span></span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a><span class="co">// Standard cleanup...</span></span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a>DataProcessor jsonProcessor <span class="op">=</span> <span class="kw">new</span> <span class="fu">JSONProcessor</span><span class="op">();</span></span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a>jsonProcessor<span class="op">.</span><span class="fu">process</span><span class="op">();</span></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a><span class="co">// Reading data from source...</span></span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a><span class="co">// Parsing JSON objects, transforming structure...</span></span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a><span class="co">// Writing to JSON output file...</span></span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a><span class="co">// Closing JSON streams and freeing memory...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="design-patterns-summary" class="level3" data-number="7.5.4">
<h3 data-number="7.5.4" class="anchored" data-anchor-id="design-patterns-summary"><span class="header-section-number">7.5.4</span> 4.4.4 Design Patterns Summary</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Pattern</th>
<th>Category</th>
<th>Intent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Singleton</strong></td>
<td>Creational</td>
<td>Ensure one instance with global access</td>
</tr>
<tr class="even">
<td><strong>Factory Method</strong></td>
<td>Creational</td>
<td>Defer instantiation to subclasses</td>
</tr>
<tr class="odd">
<td><strong>Builder</strong></td>
<td>Creational</td>
<td>Construct complex objects step by step</td>
</tr>
<tr class="even">
<td><strong>Adapter</strong></td>
<td>Structural</td>
<td>Convert interface to expected interface</td>
</tr>
<tr class="odd">
<td><strong>Decorator</strong></td>
<td>Structural</td>
<td>Add responsibilities dynamically</td>
</tr>
<tr class="even">
<td><strong>Facade</strong></td>
<td>Structural</td>
<td>Provide simple interface to complex subsystem</td>
</tr>
<tr class="odd">
<td><strong>Strategy</strong></td>
<td>Behavioral</td>
<td>Encapsulate interchangeable algorithms</td>
</tr>
<tr class="even">
<td><strong>Observer</strong></td>
<td>Behavioral</td>
<td>Notify dependents of state changes</td>
</tr>
<tr class="odd">
<td><strong>Template Method</strong></td>
<td>Behavioral</td>
<td>Define algorithm skeleton, defer steps</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="the-software-architecture-document-sad" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="the-software-architecture-document-sad"><span class="header-section-number">7.6</span> 4.5 The Software Architecture Document (SAD)</h2>
<p>A <strong>Software Architecture Document</strong> (SAD) communicates the architectural decisions for a system. It serves as a reference for developers, a communication tool for stakeholders, and a record of design rationale.</p>
<section id="purpose-of-the-sad" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="purpose-of-the-sad"><span class="header-section-number">7.6.1</span> 4.5.1 Purpose of the SAD</h3>
<p>The SAD serves multiple purposes:</p>
<p><strong>Communication</strong>: Explains the architecture to all stakeholders—developers, managers, operations, security teams.</p>
<p><strong>Decision Record</strong>: Documents what was decided, why, and what alternatives were considered.</p>
<p><strong>Onboarding</strong>: Helps new team members understand the system structure.</p>
<p><strong>Evolution Guide</strong>: Provides context for future architectural changes.</p>
<p><strong>Compliance</strong>: Satisfies documentation requirements in regulated industries.</p>
</section>
<section id="sad-structure" class="level3" data-number="7.6.2">
<h3 data-number="7.6.2" class="anchored" data-anchor-id="sad-structure"><span class="header-section-number">7.6.2</span> 4.5.2 SAD Structure</h3>
<p>While formats vary, a typical SAD includes:</p>
<pre><code>1. Introduction
   1.1 Purpose
   1.2 Scope
   1.3 Definitions, Acronyms, Abbreviations
   1.4 References

2. Architectural Goals and Constraints
   2.1 Technical Goals
   2.2 Business Goals
   2.3 Constraints

3. Architectural Representation
   3.1 Architectural Style
   3.2 Architectural Views

4. Architectural Views
   4.1 Logical View (Class/Component diagrams)
   4.2 Process View (Activity/Sequence diagrams)
   4.3 Development View (Package/Module organization)
   4.4 Physical View (Deployment diagrams)
   4.5 Use Case View (Use Case diagrams)

5. Quality Attributes
   5.1 Performance
   5.2 Scalability
   5.3 Security
   5.4 Reliability
   5.5 Maintainability

6. Design Decisions
   6.1 Decision 1: [Title]
        - Context
        - Decision
        - Rationale
        - Consequences
   6.2 Decision 2: [Title]
   ...

7. Size and Performance Targets

8. Quality Assurance

Appendices
   A. Glossary
   B. Architecture Decision Records (ADRs)</code></pre>
</section>
<section id="the-41-view-model" class="level3" data-number="7.6.3">
<h3 data-number="7.6.3" class="anchored" data-anchor-id="the-41-view-model"><span class="header-section-number">7.6.3</span> 4.5.3 The 4+1 View Model</h3>
<p>Philippe Kruchten’s <strong>4+1 View Model</strong> is a popular way to organize architectural views:</p>
<p><img src="../assets/images/ch4_fig24_four_plus_one.svg" class="img-fluid"></p>
<p><strong>Logical View</strong>: The object-oriented decomposition. Shows packages, classes, and their relationships. Addresses functional requirements.</p>
<p><strong>Process View</strong>: The run-time behavior. Shows processes, threads, and their interactions. Addresses concurrency, distribution, and performance.</p>
<p><strong>Development View</strong>: The static organization of software in its development environment. Shows modules, layers, and packages. Addresses build, configuration management.</p>
<p><strong>Physical View</strong>: The mapping of software onto hardware. Shows nodes, networks, and deployment. Addresses availability, reliability, performance.</p>
<p><strong>Use Case View (+1)</strong>: The scenarios that tie other views together. Shows how the architecture supports key use cases.</p>
</section>
<section id="architecture-decision-records-adrs" class="level3" data-number="7.6.4">
<h3 data-number="7.6.4" class="anchored" data-anchor-id="architecture-decision-records-adrs"><span class="header-section-number">7.6.4</span> 4.5.4 Architecture Decision Records (ADRs)</h3>
<p><strong>Architecture Decision Records</strong> are a lightweight way to document individual architectural decisions. Each ADR captures one decision in a standardized format.</p>
<p><strong>ADR Template:</strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># ADR-001: Use PostgreSQL as Primary Database</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Status</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>Accepted</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">## Context</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>We need a database for storing user data, orders, and product information. </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>The system needs to support complex queries, transactions, and eventual </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>scaling to millions of records.</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="fu">## Decision</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>We will use PostgreSQL as our primary database.</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rationale</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Strong ACID compliance for transactional integrity</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Excellent JSON support for semi-structured data</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Proven scalability (read replicas, partitioning)</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Team has existing PostgreSQL expertise</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Open source with strong community support</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Cloud providers offer managed PostgreSQL services</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="fu">## Alternatives Considered</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="fu">### MySQL</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Similar capabilities but less robust JSON support</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Team has less experience</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="fu">### MongoDB  </span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Better for truly unstructured data</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Weaker transaction support</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Would require learning new paradigms</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="fu">### DynamoDB</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Excellent scalability but vendor lock-in</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Limited query flexibility</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Higher cost at our scale</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="fu">## Consequences</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="fu">### Positive</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Reliable transactions for order processing</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Flexible schema evolution with JSON columns</span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Easy to find developers with experience</span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a><span class="fu">### Negative</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Need to manage database operations (or use managed service)</span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Eventual consistency challenges if we add read replicas</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>May need sharding strategy for very high scale</span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## Date</span></span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>2024-01-15</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Authors</span></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Jane Developer</span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>John Architect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Benefits of ADRs:</strong></p>
<ul>
<li>Decisions are documented when made, preserving context</li>
<li>New team members can understand why things are the way they are</li>
<li>Enables revisiting decisions when circumstances change</li>
<li>Creates a decision log over time</li>
<li>Encourages explicit, deliberate decision-making</li>
</ul>
<hr>
</section>
</section>
<section id="making-architectural-decisions" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="making-architectural-decisions"><span class="header-section-number">7.7</span> 4.6 Making Architectural Decisions</h2>
<p>Good architecture doesn’t emerge by accident. It results from deliberate decisions made with awareness of trade-offs.</p>
<section id="factors-in-architectural-decisions" class="level3" data-number="7.7.1">
<h3 data-number="7.7.1" class="anchored" data-anchor-id="factors-in-architectural-decisions"><span class="header-section-number">7.7.1</span> 4.6.1 Factors in Architectural Decisions</h3>
<p><strong>Functional Requirements</strong>: What must the system do? Some functionality naturally suggests certain architectures.</p>
<p><strong>Quality Attributes</strong>: Non-functional requirements like performance, scalability, security, and maintainability drive many architectural choices.</p>
<p><strong>Constraints</strong>: Technology constraints, budget, timeline, team skills, regulatory requirements.</p>
<p><strong>Business Context</strong>: Organizational structure, build vs.&nbsp;buy decisions, time to market pressures.</p>
<p><strong>Technical Context</strong>: Existing systems, integration requirements, infrastructure.</p>
</section>
<section id="common-trade-offs" class="level3" data-number="7.7.2">
<h3 data-number="7.7.2" class="anchored" data-anchor-id="common-trade-offs"><span class="header-section-number">7.7.2</span> 4.6.2 Common Trade-offs</h3>
<p><strong>Performance vs.&nbsp;Maintainability</strong>: Optimized code is often harder to maintain. Caching improves performance but adds complexity.</p>
<p><strong>Consistency vs.&nbsp;Availability</strong>: In distributed systems, you often can’t have both perfect consistency and continuous availability (CAP theorem).</p>
<p><strong>Flexibility vs.&nbsp;Simplicity</strong>: More abstraction and indirection enable flexibility but increase complexity.</p>
<p><strong>Security vs.&nbsp;Usability</strong>: Stronger security measures often make systems harder to use.</p>
<p><strong>Build vs.&nbsp;Buy</strong>: Custom solutions fit exactly but take time; third-party solutions are faster but may not fit perfectly.</p>
<p><strong>Monolith vs.&nbsp;Microservices</strong>: Monoliths are simpler to develop and deploy; microservices offer better scalability and team autonomy but add complexity.</p>
</section>
<section id="evaluating-architectures" class="level3" data-number="7.7.3">
<h3 data-number="7.7.3" class="anchored" data-anchor-id="evaluating-architectures"><span class="header-section-number">7.7.3</span> 4.6.3 Evaluating Architectures</h3>
<p>How do you know if an architecture is good? Consider these evaluation approaches:</p>
<p><strong>Scenario Analysis</strong>: Walk through key scenarios (both typical and exceptional) to see how the architecture handles them.</p>
<p><strong>Quality Attribute Analysis</strong>: For each quality attribute, assess how the architecture supports it.</p>
<p><strong>Risk Assessment</strong>: Identify the biggest risks and how the architecture addresses them.</p>
<p><strong>Architecture Trade-off Analysis Method (ATAM)</strong>: A formal evaluation method that identifies sensitivity points, trade-offs, and risks.</p>
<p><strong>Prototype/Spike</strong>: Build a minimal implementation to validate technical feasibility.</p>
<hr>
</section>
</section>
<section id="chapter-summary" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="chapter-summary"><span class="header-section-number">7.8</span> 4.7 Chapter Summary</h2>
<p>Software architecture is the foundation on which successful systems are built. It defines the high-level structure, establishes patterns for communication and organization, and addresses the quality attributes that matter most to stakeholders.</p>
<p>Key takeaways from this chapter:</p>
<ul>
<li><p><strong>Software architecture</strong> encompasses the fundamental structures of a system and the decisions that are hard to change later. Good architecture enables systems to meet their quality requirements.</p></li>
<li><p><strong>Architectural styles</strong> like layered architecture, MVC, microservices, and event-driven architecture provide templates for organizing systems. Each has strengths and trade-offs.</p></li>
<li><p><strong>The SOLID principles</strong> guide class and module design: Single Responsibility, Open/Closed, Liskov Substitution, Interface Segregation, and Dependency Inversion.</p></li>
<li><p><strong>Design patterns</strong> are reusable solutions to common problems. Creational patterns (Singleton, Factory, Builder) address object creation. Structural patterns (Adapter, Decorator, Facade) address object composition. Behavioral patterns (Strategy, Observer, Template Method) address object interaction.</p></li>
<li><p><strong>The Software Architecture Document</strong> communicates architectural decisions to stakeholders. The 4+1 view model organizes multiple perspectives on the architecture.</p></li>
<li><p><strong>Architecture Decision Records</strong> document individual decisions with their context, rationale, and consequences.</p></li>
<li><p><strong>Architectural decisions</strong> involve trade-offs. Good architects make these trade-offs explicitly and document their reasoning.</p></li>
</ul>
<hr>
</section>
<section id="key-terms" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="key-terms"><span class="header-section-number">7.9</span> 4.8 Key Terms</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Term</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Software Architecture</strong></td>
<td>The fundamental structures of a software system and the discipline of creating them</td>
</tr>
<tr class="even">
<td><strong>Architectural Style</strong></td>
<td>A named collection of architectural decisions common in a given context</td>
</tr>
<tr class="odd">
<td><strong>Layered Architecture</strong></td>
<td>Architecture organizing system into horizontal layers</td>
</tr>
<tr class="even">
<td><strong>MVC</strong></td>
<td>Model-View-Controller; separates data, presentation, and control logic</td>
</tr>
<tr class="odd">
<td><strong>Microservices</strong></td>
<td>Architecture of small, independent, communicating services</td>
</tr>
<tr class="even">
<td><strong>Event-Driven Architecture</strong></td>
<td>Architecture based on production and consumption of events</td>
</tr>
<tr class="odd">
<td><strong>SOLID</strong></td>
<td>Five design principles for maintainable object-oriented software</td>
</tr>
<tr class="even">
<td><strong>Design Pattern</strong></td>
<td>A reusable solution to a common software design problem</td>
</tr>
<tr class="odd">
<td><strong>Creational Pattern</strong></td>
<td>Pattern dealing with object creation</td>
</tr>
<tr class="even">
<td><strong>Structural Pattern</strong></td>
<td>Pattern dealing with object composition</td>
</tr>
<tr class="odd">
<td><strong>Behavioral Pattern</strong></td>
<td>Pattern dealing with object interaction</td>
</tr>
<tr class="even">
<td><strong>SAD</strong></td>
<td>Software Architecture Document</td>
</tr>
<tr class="odd">
<td><strong>ADR</strong></td>
<td>Architecture Decision Record</td>
</tr>
<tr class="even">
<td><strong>4+1 View Model</strong></td>
<td>Architectural documentation using four views plus scenarios</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="review-questions" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="review-questions"><span class="header-section-number">7.10</span> 4.9 Review Questions</h2>
<ol type="1">
<li><p>What is software architecture, and why is it important? How does it differ from software design?</p></li>
<li><p>Compare and contrast layered architecture and microservices architecture. What are the trade-offs, and when would you choose each?</p></li>
<li><p>Explain the MVC pattern. How do Model, View, and Controller interact? What are the benefits of this separation?</p></li>
<li><p>Describe each of the SOLID principles and provide an example of how each improves software design.</p></li>
<li><p>What is the Single Responsibility Principle? Identify a violation in code you’ve written or seen, and explain how you would refactor it.</p></li>
<li><p>Explain the Dependency Inversion Principle. How does dependency injection help implement this principle?</p></li>
<li><p>Compare the Factory Method and Builder patterns. When would you use each?</p></li>
<li><p>How does the Strategy pattern differ from a simple if-else chain? What are the benefits of using Strategy?</p></li>
<li><p>Describe the Observer pattern and give three real-world examples where it would be appropriate.</p></li>
<li><p>What is the purpose of a Software Architecture Document? Who are its audiences, and what do they need from it?</p></li>
</ol>
<hr>
</section>
<section id="hands-on-exercises" class="level2" data-number="7.11">
<h2 data-number="7.11" class="anchored" data-anchor-id="hands-on-exercises"><span class="header-section-number">7.11</span> 4.10 Hands-On Exercises</h2>
<section id="exercise-4.1-identifying-architectural-styles" class="level3" data-number="7.11.1">
<h3 data-number="7.11.1" class="anchored" data-anchor-id="exercise-4.1-identifying-architectural-styles"><span class="header-section-number">7.11.1</span> Exercise 4.1: Identifying Architectural Styles</h3>
<p>For each of the following systems, identify which architectural style(s) would be most appropriate and explain why:</p>
<ol type="1">
<li>A personal blog website</li>
<li>Netflix’s streaming service</li>
<li>A banking system processing transactions</li>
<li>A real-time multiplayer game</li>
<li>An IoT system monitoring factory equipment</li>
</ol>
</section>
<section id="exercise-4.2-solid-refactoring" class="level3" data-number="7.11.2">
<h3 data-number="7.11.2" class="anchored" data-anchor-id="exercise-4.2-solid-refactoring"><span class="header-section-number">7.11.2</span> Exercise 4.2: SOLID Refactoring</h3>
<p>The following code violates SOLID principles. Identify which principles are violated and refactor the code:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Report <span class="op">{</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> content<span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">String</span> format<span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">generateReport</span><span class="op">(</span>Database db<span class="op">,</span> <span class="bu">String</span> query<span class="op">)</span> <span class="op">{</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Get data from database</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">ResultSet</span> data <span class="op">=</span> db<span class="op">.</span><span class="fu">execute</span><span class="op">(</span>query<span class="op">);</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Format the report</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>format<span class="op">.</span><span class="fu">equals</span><span class="op">(</span><span class="st">"PDF"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>            content <span class="op">=</span> <span class="fu">formatAsPDF</span><span class="op">(</span>data<span class="op">);</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>format<span class="op">.</span><span class="fu">equals</span><span class="op">(</span><span class="st">"HTML"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>            content <span class="op">=</span> <span class="fu">formatAsHTML</span><span class="op">(</span>data<span class="op">);</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>format<span class="op">.</span><span class="fu">equals</span><span class="op">(</span><span class="st">"CSV"</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>            content <span class="op">=</span> <span class="fu">formatAsCSV</span><span class="op">(</span>data<span class="op">);</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Save to file</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>        FileSystem<span class="op">.</span><span class="fu">write</span><span class="op">(</span><span class="st">"/reports/output"</span><span class="op">,</span> content<span class="op">);</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Send email notification</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>        EmailClient<span class="op">.</span><span class="fu">send</span><span class="op">(</span><span class="st">"admin@company.com"</span><span class="op">,</span> <span class="st">"Report generated"</span><span class="op">,</span> content<span class="op">);</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exercise-4.3-implementing-design-patterns" class="level3" data-number="7.11.3">
<h3 data-number="7.11.3" class="anchored" data-anchor-id="exercise-4.3-implementing-design-patterns"><span class="header-section-number">7.11.3</span> Exercise 4.3: Implementing Design Patterns</h3>
<p>Implement the following:</p>
<ol type="1">
<li><p><strong>Factory Pattern</strong>: Create a <code>ShapeFactory</code> that creates different shapes (Circle, Rectangle, Triangle) based on input parameters.</p></li>
<li><p><strong>Decorator Pattern</strong>: Create a <code>Notification</code> system where notifications can be decorated with additional delivery methods (SMS, Email, Slack) stacked together.</p></li>
<li><p><strong>Observer Pattern</strong>: Create a weather monitoring system where <code>WeatherStation</code> notifies multiple displays (CurrentConditions, Statistics, Forecast) when measurements change.</p></li>
</ol>
</section>
<section id="exercise-4.4-architecture-analysis" class="level3" data-number="7.11.4">
<h3 data-number="7.11.4" class="anchored" data-anchor-id="exercise-4.4-architecture-analysis"><span class="header-section-number">7.11.4</span> Exercise 4.4: Architecture Analysis</h3>
<p>For your semester project:</p>
<ol type="1">
<li>Identify the primary quality attributes that matter most (e.g., performance, security, maintainability)</li>
<li>Choose an architectural style and justify your choice</li>
<li>Identify at least two design patterns you will use and explain where and why</li>
<li>Document any trade-offs you’re making</li>
</ol>
</section>
<section id="exercise-4.5-software-architecture-document" class="level3" data-number="7.11.5">
<h3 data-number="7.11.5" class="anchored" data-anchor-id="exercise-4.5-software-architecture-document"><span class="header-section-number">7.11.5</span> Exercise 4.5: Software Architecture Document</h3>
<p>Create a Software Architecture Document for your semester project, including:</p>
<ol type="1">
<li>Introduction and goals</li>
<li>Architectural style and rationale</li>
<li>Component/Package diagram showing major components</li>
<li>At least one sequence diagram for a key scenario</li>
<li>Deployment view (how will the system be deployed?)</li>
<li>At least two Architecture Decision Records (ADRs) for major decisions</li>
</ol>
</section>
<section id="exercise-4.6-pattern-recognition" class="level3" data-number="7.11.6">
<h3 data-number="7.11.6" class="anchored" data-anchor-id="exercise-4.6-pattern-recognition"><span class="header-section-number">7.11.6</span> Exercise 4.6: Pattern Recognition</h3>
<p>Identify which design pattern is being used in each of the following code snippets:</p>
<p><strong>Snippet A:</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> <span class="bu">Logger</span> <span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="dt">static</span> <span class="bu">Logger</span> instance<span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="bu">Logger</span><span class="op">()</span> <span class="op">{}</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="bu">Logger</span> <span class="fu">getInstance</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>instance <span class="op">==</span> <span class="kw">null</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>            instance <span class="op">=</span> <span class="kw">new</span> <span class="bu">Logger</span><span class="op">();</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> instance<span class="op">;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Snippet B:</strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> SortStrategy <span class="op">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="fu">sort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> array<span class="op">);</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> QuickSort <span class="kw">implements</span> SortStrategy <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MergeSort <span class="kw">implements</span> SortStrategy <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Sorter <span class="op">{</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> SortStrategy strategy<span class="op">;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">setStrategy</span><span class="op">(</span>SortStrategy strategy<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">strategy</span> <span class="op">=</span> strategy<span class="op">;</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">performSort</span><span class="op">(</span><span class="dt">int</span><span class="op">[]</span> array<span class="op">)</span> <span class="op">{</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        strategy<span class="op">.</span><span class="fu">sort</span><span class="op">(</span>array<span class="op">);</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Snippet C:</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> Beverage <span class="op">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="fu">cost</span><span class="op">();</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Espresso <span class="kw">implements</span> Beverage <span class="op">{</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">cost</span><span class="op">()</span> <span class="op">{</span> <span class="cf">return</span> <span class="fl">1.99</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> MilkDecorator <span class="kw">implements</span> Beverage <span class="op">{</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> Beverage beverage<span class="op">;</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">MilkDecorator</span><span class="op">(</span>Beverage beverage<span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">beverage</span> <span class="op">=</span> beverage<span class="op">;</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">double</span> <span class="fu">cost</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> beverage<span class="op">.</span><span class="fu">cost</span><span class="op">()</span> <span class="op">+</span> <span class="fl">0.50</span><span class="op">;</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="further-reading" class="level2" data-number="7.12">
<h2 data-number="7.12" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">7.12</span> 4.11 Further Reading</h2>
<p><strong>Books:</strong></p>
<ul>
<li>Martin, R. C. (2017). <em>Clean Architecture: A Craftsman’s Guide to Software Structure and Design</em>. Prentice Hall.</li>
<li>Gamma, E., Helm, R., Johnson, R., &amp; Vlissides, J. (1994). <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>. Addison-Wesley.</li>
<li>Richards, M. &amp; Ford, N. (2020). <em>Fundamentals of Software Architecture</em>. O’Reilly Media.</li>
<li>Newman, S. (2021). <em>Building Microservices</em> (2nd Edition). O’Reilly Media.</li>
<li>Bass, L., Clements, P., &amp; Kazman, R. (2012). <em>Software Architecture in Practice</em> (3rd Edition). Addison-Wesley.</li>
</ul>
<p><strong>Online Resources:</strong></p>
<ul>
<li>Refactoring Guru - Design Patterns: https://refactoring.guru/design-patterns</li>
<li>Martin Fowler’s Architecture Guide: https://martinfowler.com/architecture/</li>
<li>Microsoft Architecture Guides: https://docs.microsoft.com/en-us/azure/architecture/</li>
<li>ADR GitHub Organization: https://adr.github.io/</li>
</ul>
<hr>
</section>
<section id="references" class="level2" data-number="7.13">
<h2 data-number="7.13" class="anchored" data-anchor-id="references"><span class="header-section-number">7.13</span> References</h2>
<p>Bass, L., Clements, P., &amp; Kazman, R. (2012). <em>Software Architecture in Practice</em> (3rd Edition). Addison-Wesley.</p>
<p>Buschmann, F., Meunier, R., Rohnert, H., Sommerlad, P., &amp; Stal, M. (1996). <em>Pattern-Oriented Software Architecture Volume 1: A System of Patterns</em>. Wiley.</p>
<p>Fowler, M. (2002). <em>Patterns of Enterprise Application Architecture</em>. Addison-Wesley.</p>
<p>Gamma, E., Helm, R., Johnson, R., &amp; Vlissides, J. (1994). <em>Design Patterns: Elements of Reusable Object-Oriented Software</em>. Addison-Wesley.</p>
<p>Kruchten, P. (1995). The 4+1 View Model of Architecture. <em>IEEE Software</em>, 12(6), 42-50.</p>
<p>Martin, R. C. (2000). Design Principles and Design Patterns. Retrieved from http://www.objectmentor.com/</p>
<p>Martin, R. C. (2017). <em>Clean Architecture: A Craftsman’s Guide to Software Structure and Design</em>. Prentice Hall.</p>
<p>Newman, S. (2021). <em>Building Microservices</em> (2nd Edition). O’Reilly Media.</p>
<p>Richards, M., &amp; Ford, N. (2020). <em>Fundamentals of Software Architecture: An Engineering Approach</em>. O’Reilly Media.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/03-systems-modeling.html" class="pagination-link" aria-label="Chapter 3: Systems Modeling and UML">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Chapter 3: Systems Modeling and UML</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/05-ui-ux.html" class="pagination-link" aria-label="Chapter 5: UI/UX Design and Prototyping">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Chapter 5: UI/UX Design and Prototyping</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>