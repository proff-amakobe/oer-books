<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 650">
  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Figure 2.3: Transformer Layer Stack - Progressive Sophistication Through Depth
  </text>
  
  <!-- Input layer -->
  <rect x="150" y="80" width="400" height="50" fill="#ecf0f1" stroke="#95a5a6" stroke-width="2" rx="5"/>
  <text x="350" y="110" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Input: Token Embeddings + Positional Encoding
  </text>
  
  <!-- Arrow -->
  <path d="M 350 130 L 350 160" stroke="#34495e" stroke-width="2" marker-end="url(#arrowblack)"/>
  
  <!-- Layer 1-10: Basic Processing -->
  <g id="layers-1-10">
    <rect x="150" y="160" width="400" height="80" fill="#e8f4f8" stroke="#3498db" stroke-width="3" rx="5"/>
    <text x="350" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Layers 1-10: Basic Understanding
    </text>
    <text x="180" y="210" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Simple syntax and grammar
    </text>
    <text x="180" y="228" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Word-level relationships
    </text>
  </g>
  
  <text x="600" y="200" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d" font-style="italic">
    "The cat sat"
  </text>
  
  <!-- Arrow -->
  <path d="M 350 240 L 350 270" stroke="#34495e" stroke-width="2" marker-end="url(#arrowblack)"/>
  
  <!-- Layer 11-40: Intermediate Processing -->
  <g id="layers-11-40">
    <rect x="150" y="270" width="400" height="80" fill="#f4e8f8" stroke="#9b59b6" stroke-width="3" rx="5"/>
    <text x="350" y="295" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Layers 11-40: Complex Structures
    </text>
    <text x="180" y="320" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Complex grammatical patterns
    </text>
    <text x="180" y="338" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Semantic relationships
    </text>
  </g>
  
  <text x="570" y="310" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d" font-style="italic">
    Sentence structure
  </text>
  
  <!-- Arrow -->
  <path d="M 350 350 L 350 380" stroke="#34495e" stroke-width="2" marker-end="url(#arrowblack)"/>
  
  <!-- Layer 41-70: Advanced Processing -->
  <g id="layers-41-70">
    <rect x="150" y="380" width="400" height="80" fill="#e8f8e8" stroke="#27ae60" stroke-width="3" rx="5"/>
    <text x="350" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#229954">
      Layers 41-70: Abstract Reasoning
    </text>
    <text x="180" y="430" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Knowledge integration
    </text>
    <text x="180" y="448" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Context understanding
    </text>
  </g>
  
  <text x="580" y="420" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d" font-style="italic">
    Meaning &amp; context
  </text>
  
  <!-- Arrow -->
  <path d="M 350 460 L 350 490" stroke="#34495e" stroke-width="2" marker-end="url(#arrowblack)"/>
  
  <!-- Layer 71-96: Deep Processing -->
  <g id="layers-71-96">
    <rect x="150" y="490" width="400" height="80" fill="#fef5e7" stroke="#f39c12" stroke-width="3" rx="5"/>
    <text x="350" y="515" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#d68910">
      Layers 71-96: Sophisticated Synthesis
    </text>
    <text x="180" y="540" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Complex inference
    </text>
    <text x="180" y="558" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">
      • Creative generation
    </text>
  </g>
  
  <text x="570" y="530" font-family="Arial, sans-serif" font-size="11" fill="#7f8c8d" font-style="italic">
    Deep understanding
  </text>
  
  <!-- Arrow -->
  <path d="M 350 570 L 350 600" stroke="#34495e" stroke-width="2" marker-end="url(#arrowblack)"/>
  
  <!-- Output layer -->
  <rect x="150" y="600" width="400" height="40" fill="#2ecc71" stroke="#27ae60" stroke-width="2" rx="5"/>
  <text x="350" y="625" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
    Output: Next Token Prediction
  </text>
  
  <!-- Side annotation -->
  <g id="side-note">
    <line x1="60" y1="160" x2="60" y2="570" stroke="#e74c3c" stroke-width="3"/>
    <path d="M 60 160 L 55 175 L 65 175 Z" fill="#e74c3c"/>
    <path d="M 60 570 L 55 555 L 65 555 Z" fill="#e74c3c"/>
    
    <text x="35" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#e74c3c" transform="rotate(-90 35 365)">
      Increasing Sophistication
    </text>
  </g>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrowblack" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#34495e"/>
    </marker>
  </defs>
</svg>
