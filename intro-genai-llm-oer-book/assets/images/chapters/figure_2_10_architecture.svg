<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750">
  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Figure 2.10: Enhanced Research Assistant Architecture
  </text>
  
  <!-- User Interface Layer -->
  <g id="ui-layer">
    <rect x="300" y="60" width="300" height="60" fill="#3498db" stroke="#2980b9" stroke-width="3" rx="8"/>
    <text x="450" y="85" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">
      ðŸ‘¤ User Interface (Streamlit)
    </text>
    <text x="450" y="105" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
      Query input, results display, analytics dashboard
    </text>
  </g>
  
  <!-- Arrow down -->
  <path d="M 450 120 L 450 160" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Intelligence Layer -->
  <g id="intelligence-layer">
    <rect x="50" y="160" width="800" height="140" fill="#f8f9fa" stroke="#34495e" stroke-width="3" rx="8"/>
    <text x="450" y="185" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Intelligence Layer
    </text>
    
    <!-- Query Analyzer -->
    <rect x="80" y="200" width="220" height="80" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="5"/>
    <text x="190" y="225" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Query Analyzer
    </text>
    <text x="95" y="245" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Complexity scoring
    </text>
    <text x="95" y="260" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Type classification
    </text>
    <text x="95" y="275" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Capability requirements
    </text>
    
    <!-- Arrow -->
    <path d="M 300 240 L 340 240" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowsmall)"/>
    
    <!-- Model Router -->
    <rect x="340" y="200" width="220" height="80" fill="#f4e8f8" stroke="#9b59b6" stroke-width="2" rx="5"/>
    <text x="450" y="225" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Model Router
    </text>
    <text x="355" y="245" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Optimal model selection
    </text>
    <text x="355" y="260" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Budget constraints
    </text>
    <text x="355" y="275" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Fallback strategies
    </text>
    
    <!-- Arrow -->
    <path d="M 560 240 L 600 240" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowsmall)"/>
    
    <!-- Decision Output -->
    <rect x="600" y="210" width="220" height="60" fill="#e8f8e8" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="710" y="235" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#229954">
      Selected: GPT-4
    </text>
    <text x="710" y="250" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#7f8c8d">
      Fallback: Sonnet
    </text>
    <text x="710" y="263" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      Est. cost: $0.025
    </text>
  </g>
  
  <!-- Arrow down -->
  <path d="M 450 300 L 450 340" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Optimization Layer -->
  <g id="optimization-layer">
    <rect x="50" y="340" width="800" height="140" fill="#f8f9fa" stroke="#34495e" stroke-width="3" rx="8"/>
    <text x="450" y="365" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Optimization Layer
    </text>
    
    <!-- Cache Manager -->
    <rect x="80" y="380" width="220" height="80" fill="#fef5e7" stroke="#f39c12" stroke-width="2" rx="5"/>
    <text x="190" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#d68910">
      Cache Manager
    </text>
    <text x="95" y="425" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Exact match cache
    </text>
    <text x="95" y="440" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Semantic similarity
    </text>
    <text x="95" y="455" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Hit rate: 40%+
    </text>
    
    <!-- Cost Tracker -->
    <rect x="340" y="380" width="220" height="80" fill="#ffe6e6" stroke="#e74c3c" stroke-width="2" rx="5"/>
    <text x="450" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#c0392b">
      Cost Tracker
    </text>
    <text x="355" y="425" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Daily budget monitoring
    </text>
    <text x="355" y="440" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Per-model costs
    </text>
    <text x="355" y="455" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Budget alerts
    </text>
    
    <!-- Performance Monitor -->
    <rect x="600" y="380" width="220" height="80" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="5"/>
    <text x="710" y="405" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Performance Monitor
    </text>
    <text x="615" y="425" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Response time tracking
    </text>
    <text x="615" y="440" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Quality metrics
    </text>
    <text x="615" y="455" font-family="Arial, sans-serif" font-size="10" fill="#2c3e50">
      â€¢ Analytics dashboard
    </text>
  </g>
  
  <!-- Arrow down -->
  <path d="M 450 480 L 450 520" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Generation Layer -->
  <g id="generation-layer">
    <rect x="50" y="520" width="800" height="140" fill="#f8f9fa" stroke="#34495e" stroke-width="3" rx="8"/>
    <text x="450" y="545" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Generation Layer
    </text>
    
    <!-- OpenAI -->
    <rect x="100" y="560" width="160" height="70" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="5"/>
    <text x="180" y="585" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#2980b9">
      OpenAI API
    </text>
    <text x="180" y="603" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      GPT-3.5, GPT-4
    </text>
    <text x="180" y="617" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      with fallback
    </text>
    
    <!-- Anthropic -->
    <rect x="300" y="560" width="160" height="70" fill="#f4e8f8" stroke="#9b59b6" stroke-width="2" rx="5"/>
    <text x="380" y="585" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Anthropic API
    </text>
    <text x="380" y="603" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      Haiku, Sonnet, Opus
    </text>
    <text x="380" y="617" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      with fallback
    </text>
    
    <!-- Llama (Optional) -->
    <rect x="500" y="560" width="160" height="70" fill="#e8f8e8" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="580" y="585" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#229954">
      Llama (Optional)
    </text>
    <text x="580" y="603" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      Self-hosted
    </text>
    <text x="580" y="617" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      for privacy
    </text>
    
    <!-- Markov Chain -->
    <rect x="700" y="560" width="140" height="70" fill="#ecf0f1" stroke="#95a5a6" stroke-width="1" rx="5"/>
    <text x="770" y="585" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7f8c8d">
      Markov Chain
    </text>
    <text x="770" y="603" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      (Comparison/
    </text>
    <text x="770" y="617" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#7f8c8d">
      Educational)
    </text>
  </g>
  
  <!-- Arrow down -->
  <path d="M 450 660 L 450 695" stroke="#34495e" stroke-width="3" marker-end="url(#arrow)"/>
  
  <!-- Output -->
  <rect x="250" y="695" width="400" height="45" fill="#2ecc71" stroke="#27ae60" stroke-width="3" rx="8"/>
  <text x="450" y="715" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">
    ðŸ“Š Response + Metadata + Analytics
  </text>
  <text x="450" y="732" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">
    (Cost, time, model used, cache status, reasoning)
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#34495e"/>
    </marker>
    <marker id="arrowsmall" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#7f8c8d"/>
    </marker>
  </defs>
</svg>
