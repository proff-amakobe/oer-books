<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Figure 2.2: Multi-Head Attention - Different Heads Focus on Different Relationships
  </text>
  
  <!-- Example sentence -->
  <text x="450" y="60" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#34495e">
    "The brilliant researcher who developed the vaccine published her findings"
  </text>
  
  <!-- Four attention heads -->
  
  <!-- Head 1: Syntax -->
  <g id="head1">
    <rect x="30" y="100" width="200" height="110" fill="#e8f4f8" stroke="#3498db" stroke-width="2" rx="8"/>
    <text x="130" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2980b9">
      Head 1: Syntax
    </text>
    <circle cx="70" cy="160" r="8" fill="#3498db"/>
    <text x="85" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">researcher</text>
    
    <path d="M 130 165 L 150 165" stroke="#3498db" stroke-width="2" marker-end="url(#arrow1)"/>
    
    <circle cx="170" cy="160" r="8" fill="#3498db"/>
    <text x="185" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">published</text>
    
    <text x="130" y="195" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7f8c8d" font-style="italic">
      Subject-Verb
    </text>
  </g>
  
  <!-- Head 2: Semantics -->
  <g id="head2">
    <rect x="250" y="100" width="200" height="110" fill="#f4e8f8" stroke="#9b59b6" stroke-width="2" rx="8"/>
    <text x="350" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#8e44ad">
      Head 2: Semantics
    </text>
    <circle cx="280" cy="160" r="8" fill="#9b59b6"/>
    <text x="295" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">vaccine</text>
    
    <path d="M 340 165 L 360 165" stroke="#9b59b6" stroke-width="2" marker-end="url(#arrow2)"/>
    
    <circle cx="390" cy="160" r="8" fill="#9b59b6"/>
    <text x="405" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">findings</text>
    
    <text x="350" y="195" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7f8c8d" font-style="italic">
      Topic Connection
    </text>
  </g>
  
  <!-- Head 3: References -->
  <g id="head3">
    <rect x="470" y="100" width="200" height="110" fill="#e8f8e8" stroke="#27ae60" stroke-width="2" rx="8"/>
    <text x="570" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#229954">
      Head 3: References
    </text>
    <circle cx="510" cy="160" r="8" fill="#27ae60"/>
    <text x="525" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">her</text>
    
    <path d="M 560 165 L 580 165" stroke="#27ae60" stroke-width="2" marker-end="url(#arrow3)"/>
    
    <circle cx="600" cy="160" r="8" fill="#27ae60"/>
    <text x="615" y="165" font-family="Arial, sans-serif" font-size="12" fill="#2c3e50">researcher</text>
    
    <text x="570" y="195" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#7f8c8d" font-style="italic">
      Pronoun Resolution
    </text>
  </g>
  
  <!-- Head 4: Position -->
  <g id="head4">
    <rect x="690" y="100" width="180" height="110" fill="#fef5e7" stroke="#f39c12" stroke-width="2" rx="8"/>
    <text x="780" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#d68910">
      Head 4: Position
    </text>
    
    <rect x="710" y="145" width="140" height="50" fill="white" stroke="#f39c12" stroke-width="1" rx="4"/>
    <text x="780" y="165" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">
      Word Order &amp;
    </text>
    <text x="780" y="182" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2c3e50">
      Clause Structure
    </text>
  </g>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#3498db"/>
    </marker>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#9b59b6"/>
    </marker>
    <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#27ae60"/>
    </marker>
  </defs>
  
  <!-- Combination layer -->
  <g id="combination">
    <rect x="200" y="260" width="500" height="100" fill="#f8f9fa" stroke="#34495e" stroke-width="2" rx="8"/>
    
    <text x="450" y="285" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2c3e50">
      Combined Understanding
    </text>
    
    <!-- Arrows from heads to combination -->
    <path d="M 130 210 L 350 260" stroke="#3498db" stroke-width="1.5" stroke-dasharray="3,3"/>
    <path d="M 350 210 L 390 260" stroke="#9b59b6" stroke-width="1.5" stroke-dasharray="3,3"/>
    <path d="M 570 210 L 480 260" stroke="#27ae60" stroke-width="1.5" stroke-dasharray="3,3"/>
    <path d="M 780 210 L 520 260" stroke="#f39c12" stroke-width="1.5" stroke-dasharray="3,3"/>
    
    <text x="450" y="315" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#34495e">
      All heads work together to build complete understanding
    </text>
    <text x="450" y="335" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#34495e">
      Each specializes in different linguistic relationships
    </text>
  </g>
  
  <!-- Key insight box -->
  <rect x="150" y="390" width="600" height="170" fill="#eef6ff" stroke="#3498db" stroke-width="2" rx="10"/>
  
  <text x="450" y="420" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Why Multiple Heads Matter
  </text>
  
  <text x="180" y="450" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50">
    • Language has multiple layers of meaning operating simultaneously
  </text>
  <text x="180" y="475" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50">
    • Single attention can't capture all nuances (syntax, semantics, references, etc.)
  </text>
  <text x="180" y="500" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50">
    • GPT-3 uses 96 attention heads per layer - each becoming specialized
  </text>
  <text x="180" y="525" font-family="Arial, sans-serif" font-size="13" fill="#2c3e50">
    • Different heads learn different expertise through training
  </text>
</svg>
