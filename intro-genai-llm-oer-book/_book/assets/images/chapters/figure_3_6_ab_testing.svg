<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="450" y="30" font-size="18" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Systematic A/B Testing Process for Prompt Optimization
  </text>
  
  <!-- Step 1: Hypothesis Formation -->
  <rect x="50" y="60" width="250" height="110" fill="#e3f2fd" stroke="#2196f3" stroke-width="3" rx="5"/>
  <text x="175" y="85" font-size="14" font-weight="bold" text-anchor="middle" fill="#1976d2">
    Step 1: Hypothesis
  </text>
  <text x="60" y="110" font-size="10" fill="#2c3e50">
    <tspan x="60" dy="0" font-weight="bold">Define expected improvement:</tspan>
    <tspan x="60" dy="16">"Adding step-by-step instructions</tspan>
    <tspan x="60" dy="12">will increase task success rate</tspan>
    <tspan x="60" dy="12">by 10% for analytical queries"</tspan>
  </text>
  <circle cx="290" cy="115" r="15" fill="#ffc107"/>
  <text x="290" y="121" font-size="12" font-weight="bold" text-anchor="middle" fill="white">1</text>
  
  <!-- Arrow 1 -->
  <path d="M 175 170 L 175 190" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 2: Variant Design -->
  <rect x="50" y="200" width="250" height="110" fill="#fff3e0" stroke="#ff9800" stroke-width="3" rx="5"/>
  <text x="175" y="225" font-size="14" font-weight="bold" text-anchor="middle" fill="#f57c00">
    Step 2: Variant Design
  </text>
  <text x="60" y="250" font-size="10" fill="#2c3e50">
    <tspan x="60" dy="0" font-weight="bold">Create minimal viable difference:</tspan>
    <tspan x="60" dy="16">Version A (Control): Current prompt</tspan>
    <tspan x="60" dy="12">Version B (Test): Same prompt +</tspan>
    <tspan x="60" dy="12">explicit step enumeration</tspan>
  </text>
  <circle cx="290" cy="255" r="15" fill="#ffc107"/>
  <text x="290" y="261" font-size="12" font-weight="bold" text-anchor="middle" fill="white">2</text>
  
  <!-- Arrow 2 -->
  <path d="M 175 310 L 175 330" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 3: Test Design -->
  <rect x="50" y="340" width="250" height="110" fill="#f3e5f5" stroke="#9c27b0" stroke-width="3" rx="5"/>
  <text x="175" y="365" font-size="14" font-weight="bold" text-anchor="middle" fill="#7b1fa2">
    Step 3: Test Protocol
  </text>
  <text x="60" y="390" font-size="10" fill="#2c3e50">
    <tspan x="60" dy="0" font-weight="bold">Define parameters:</tspan>
    <tspan x="60" dy="16">• Sample size: 50+ per variant</tspan>
    <tspan x="60" dy="12">• Random assignment (50/50 split)</tspan>
    <tspan x="60" dy="12">• Duration: 1-2 weeks</tspan>
    <tspan x="60" dy="12">• Success criteria: p &lt; 0.05</tspan>
  </text>
  <circle cx="290" cy="395" r="15" fill="#ffc107"/>
  <text x="290" y="401" font-size="12" font-weight="bold" text-anchor="middle" fill="white">3</text>
  
  <!-- Arrow 3 -->
  <path d="M 175 450 L 175 470" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 4: Data Collection -->
  <rect x="50" y="480" width="250" height="110" fill="#e8f5e9" stroke="#4caf50" stroke-width="3" rx="5"/>
  <text x="175" y="505" font-size="14" font-weight="bold" text-anchor="middle" fill="#2e7d32">
    Step 4: Data Collection
  </text>
  <text x="60" y="530" font-size="10" fill="#2c3e50">
    <tspan x="60" dy="0" font-weight="bold">Track for each response:</tspan>
    <tspan x="60" dy="16">• Success/failure (task completed)</tspan>
    <tspan x="60" dy="12">• Quality score (1-10)</tspan>
    <tspan x="60" dy="12">• Token count and cost</tspan>
    <tspan x="60" dy="12">• Response time (latency)</tspan>
  </text>
  <circle cx="290" cy="535" r="15" fill="#ffc107"/>
  <text x="290" y="541" font-size="12" font-weight="bold" text-anchor="middle" fill="white">4</text>
  
  <!-- Arrow to Analysis Section -->
  <path d="M 300 535 L 360 535" stroke="#2c3e50" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Analysis Section -->
  <rect x="370" y="60" width="480" height="530" fill="#f8f9fa" stroke="#6c757d" stroke-width="2" rx="5"/>
  <text x="610" y="90" font-size="15" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Statistical Analysis &amp; Decision Making
  </text>
  
  <!-- Step 5: Statistical Analysis -->
  <rect x="390" y="110" width="440" height="140" fill="#fff" stroke="#2196f3" stroke-width="2" rx="5"/>
  <text x="610" y="135" font-size="13" font-weight="bold" text-anchor="middle" fill="#1976d2">
    Step 5: Statistical Analysis
  </text>
  
  <!-- Results Table -->
  <g transform="translate(400, 150)">
    <!-- Header -->
    <rect x="0" y="0" width="140" height="25" fill="#2196f3"/>
    <rect x="140" y="0" width="140" height="25" fill="#4caf50"/>
    <rect x="280" y="0" width="140" height="25" fill="#9c27b0"/>
    <text x="70" y="17" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Metric</text>
    <text x="210" y="17" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Version A</text>
    <text x="350" y="17" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Version B</text>
    
    <!-- Row 1: Success Rate -->
    <rect x="0" y="25" width="140" height="25" fill="#e3f2fd"/>
    <rect x="140" y="25" width="140" height="25" fill="#fff"/>
    <rect x="280" y="25" width="140" height="25" fill="#fff"/>
    <text x="70" y="42" font-size="10" text-anchor="middle" fill="#2c3e50">Success Rate</text>
    <text x="210" y="42" font-size="10" text-anchor="middle" fill="#2c3e50">82%</text>
    <text x="350" y="42" font-size="10" font-weight="bold" text-anchor="middle" fill="#27ae60">94%</text>
    
    <!-- Row 2: Avg Quality -->
    <rect x="0" y="50" width="140" height="25" fill="#e3f2fd"/>
    <rect x="140" y="50" width="140" height="25" fill="#fff"/>
    <rect x="280" y="50" width="140" height="25" fill="#fff"/>
    <text x="70" y="67" font-size="10" text-anchor="middle" fill="#2c3e50">Avg Quality</text>
    <text x="210" y="67" font-size="10" text-anchor="middle" fill="#2c3e50">7.4</text>
    <text x="350" y="67" font-size="10" font-weight="bold" text-anchor="middle" fill="#27ae60">8.7</text>
    
    <!-- Row 3: P-value -->
    <rect x="0" y="75" width="140" height="25" fill="#e3f2fd"/>
    <rect x="140" y="75" width="280" height="25" fill="#fff"/>
    <text x="70" y="92" font-size="10" text-anchor="middle" fill="#2c3e50">P-value</text>
    <text x="280" y="92" font-size="10" font-weight="bold" text-anchor="middle" fill="#27ae60">0.003 (Significant!)</text>
  </g>
  
  <!-- Step 6: Decision Matrix -->
  <rect x="390" y="270" width="440" height="140" fill="#fff" stroke="#ff9800" stroke-width="2" rx="5"/>
  <text x="610" y="295" font-size="13" font-weight="bold" text-anchor="middle" fill="#f57c00">
    Step 6: Decision Matrix
  </text>
  
  <text x="400" y="320" font-size="10" fill="#2c3e50">
    <tspan x="400" dy="0" font-weight="bold">IF: Significant improvement (p &lt; 0.05) + No downsides</tspan>
    <tspan x="400" dy="15">→ <tspan fill="#27ae60" font-weight="bold">DEPLOY Version B</tspan> to all users</tspan>
    
    <tspan x="400" dy="25" font-weight="bold">IF: Significant improvement + Higher cost</tspan>
    <tspan x="400" dy="15">→ Calculate ROI, consider selective deployment</tspan>
    
    <tspan x="400" dy="25" font-weight="bold">IF: No significant difference (p ≥ 0.05)</tspan>
    <tspan x="400" dy="15">→ <tspan fill="#e74c3c" font-weight="bold">KEEP Version A</tspan> (simpler is better)</tspan>
    
    <tspan x="400" dy="25" font-weight="bold">IF: Significant degradation</tspan>
    <tspan x="400" dy="15">→ <tspan fill="#e74c3c" font-weight="bold">REJECT Version B</tspan>, analyze why it failed</tspan>
  </text>
  
  <!-- Step 7: Implementation -->
  <rect x="390" y="430" width="440" height="140" fill="#fff" stroke="#4caf50" stroke-width="2" rx="5"/>
  <text x="610" y="455" font-size="13" font-weight="bold" text-anchor="middle" fill="#2e7d32">
    Step 7: Rollout &amp; Monitor
  </text>
  
  <g transform="translate(400, 470)">
    <!-- Phased rollout -->
    <text x="0" y="0" font-size="10" font-weight="bold" fill="#2c3e50">Phased Rollout Strategy:</text>
    
    <!-- Phase bars -->
    <text x="10" y="20" font-size="9" fill="#2c3e50">Phase 1: 10% of traffic (1 week)</text>
    <rect x="10" y="25" width="40" height="12" fill="#4caf50" rx="2"/>
    <rect x="50" y="25" width="360" height="12" fill="#ecf0f1" rx="2"/>
    
    <text x="10" y="50" font-size="9" fill="#2c3e50">Phase 2: 50% of traffic (1 week)</text>
    <rect x="10" y="55" width="200" height="12" fill="#4caf50" rx="2"/>
    <rect x="210" y="55" width="200" height="12" fill="#ecf0f1" rx="2"/>
    
    <text x="10" y="80" font-size="9" fill="#2c3e50">Phase 3: 100% rollout</text>
    <rect x="10" y="85" width="410" height="12" fill="#4caf50" rx="2"/>
    
    <!-- Monitoring -->
    <text x="0" y="115" font-size="10" fill="#2c3e50">
      <tspan x="0" dy="0">✓ Monitor metrics continuously during rollout</tspan>
      <tspan x="0" dy="14">✓ Be ready to rollback if metrics degrade</tspan>
    </text>
  </g>
  
  <!-- Continuous Improvement Arrow -->
  <path d="M 610 590 Q 700 620, 750 535 Q 760 490, 690 460" 
        stroke="#9c27b0" stroke-width="3" fill="none" 
        marker-end="url(#arrowPurple)" stroke-dasharray="5,5"/>
  <text x="740" y="570" font-size="11" font-weight="bold" fill="#9c27b0">
    Continuous
  </text>
  <text x="740" y="585" font-size="11" font-weight="bold" fill="#9c27b0">
    Improvement
  </text>
  
  <!-- Key Principles -->
  <rect x="50" y="620" width="800" height="60" fill="#fff9e6" stroke="#ffc107" stroke-width="2" rx="5"/>
  <text x="450" y="645" font-size="13" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Key Principles of Effective A/B Testing
  </text>
  <text x="450" y="665" font-size="10" text-anchor="middle" fill="#2c3e50">
    Change one variable • Adequate sample size • Statistical significance • Monitor continuously • Document learnings
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2c3e50"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9c27b0"/>
    </marker>
  </defs>
</svg>
